"use strict";(self.webpackChunkpfefront=self.webpackChunkpfefront||[]).push([[872],{54872:(e,a,t)=>{t.r(a),t.d(a,{default:()=>M});var r=t(89379),s=t(65043),l=t(99012),n=t(71330),c=t(11046),i=t(7353),d=t(94496),o=t(42518),m=t(79650),j=t(61596),A=t(71806),p=t(84882),h=t(28076),x=t(10039),u=t(73460),g=t(43845),f=t(18483),b=t(17392),v=t(90035),y=t(26600),P=t(35316),_=t(67784),C=t(53193),T=t(79190),N=t(69285),w=t(32143),L=t(29347),S=t(70141),W=t(83560),k=t(51387),B=t(70579);const M=()=>{const[e,a]=(0,s.useState)([]),[t,M]=(0,s.useState)({teamName:"",teamLead:"",members:[],projects:[]}),[I,E]=(0,s.useState)([]),[R,z]=(0,s.useState)([]),[D,U]=(0,s.useState)([]),[V,q]=(0,s.useState)(!1),F=async()=>{try{const[e,t,r,s]=await Promise.all([l.A.getAll(),n.A.getUserByRole("manager"),n.A.getUserByRole("developer"),c.A.getAll()]);a(e.data),E(t.data),z(r.data),U(s.data)}catch(e){console.error("Error fetching data:",e)}};(0,s.useEffect)((()=>{F()}),[]);const G=e=>{const{name:a,value:t}=e.target;M((e=>(0,r.A)((0,r.A)({},e),{},{[a]:t})))},H=async e=>{e.preventDefault();try{await l.A.createTeam(t),M({teamName:"",teamLead:"",members:[],projects:[]}),await F(),q(!1)}catch(a){console.error("Error creating team:",a)}},J=()=>{q(!1)};return(0,B.jsxs)(i.A,{p:4,children:[(0,B.jsx)(d.A,{variant:"h4",gutterBottom:!0,children:"Team Management"}),(0,B.jsx)(i.A,{display:"flex",justifyContent:"flex-end",mb:2,children:(0,B.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,B.jsx)(S.A,{}),onClick:()=>{q(!0)},children:"Add Team"})}),(0,B.jsx)(m.A,{component:j.A,children:(0,B.jsxs)(A.A,{children:[(0,B.jsx)(p.A,{children:(0,B.jsxs)(h.A,{children:[(0,B.jsx)(x.A,{children:"Team Name"}),(0,B.jsx)(x.A,{children:"Team Lead"}),(0,B.jsx)(x.A,{children:"Members"}),(0,B.jsx)(x.A,{children:"Projects"}),(0,B.jsx)(x.A,{children:"Actions"})]})}),(0,B.jsx)(u.A,{children:e.map((e=>{const a=I.find((a=>a._id===e.teamLead)),t=R.filter((a=>e.members.includes(a._id))),r=D.filter((a=>e.projects.includes(a._id)));return(0,B.jsxs)(h.A,{children:[(0,B.jsx)(x.A,{children:e.teamName}),(0,B.jsx)(x.A,{children:(null===a||void 0===a?void 0:a.username)||"Not assigned"}),(0,B.jsx)(x.A,{children:t.map((e=>(0,B.jsx)(g.A,{label:e.username,size:"small",style:{margin:"2px"}},e._id)))}),(0,B.jsx)(x.A,{children:r.map((e=>(0,B.jsx)(g.A,{label:e.ProjectName,size:"small",style:{margin:"2px"}},e._id)))}),(0,B.jsxs)(x.A,{children:[(0,B.jsx)(f.A,{title:"Edit",children:(0,B.jsx)(b.A,{children:(0,B.jsx)(W.A,{})})}),(0,B.jsx)(f.A,{title:"Delete",children:(0,B.jsx)(b.A,{children:(0,B.jsx)(k.A,{})})})]})]},e._id)}))})]})}),(0,B.jsxs)(v.A,{open:V,onClose:J,maxWidth:"sm",fullWidth:!0,children:[(0,B.jsx)(y.A,{children:"Add New Team"}),(0,B.jsx)(P.A,{children:(0,B.jsxs)("form",{onSubmit:H,children:[(0,B.jsx)(_.A,{label:"Team Name",name:"teamName",value:t.teamName,onChange:G,variant:"outlined",fullWidth:!0,margin:"normal"}),(0,B.jsxs)(C.A,{variant:"outlined",fullWidth:!0,margin:"normal",children:[(0,B.jsx)(T.A,{id:"team-lead-label",children:"Team Lead"}),(0,B.jsxs)(N.A,{labelId:"team-lead-label",name:"teamLead",value:t.teamLead,onChange:G,label:"Team Lead",children:[(0,B.jsx)(w.A,{value:"",children:"Select a team lead"}),I.map((e=>(0,B.jsx)(w.A,{value:e._id,children:e.username},e._id)))]})]}),(0,B.jsxs)(C.A,{variant:"outlined",fullWidth:!0,margin:"normal",children:[(0,B.jsx)(T.A,{id:"members-label",children:"Members"}),(0,B.jsx)(N.A,{labelId:"members-label",name:"members",multiple:!0,value:t.members,onChange:G,label:"Members",renderValue:e=>(0,B.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var a;return(0,B.jsx)(g.A,{label:null===(a=R.find((a=>a._id===e)))||void 0===a?void 0:a.username},e)}))}),children:R.map((e=>(0,B.jsx)(w.A,{value:e._id,children:e.username},e._id)))})]}),(0,B.jsxs)(C.A,{variant:"outlined",fullWidth:!0,margin:"normal",children:[(0,B.jsx)(T.A,{id:"projects-label",children:"Projects"}),(0,B.jsx)(N.A,{labelId:"projects-label",name:"projects",multiple:!0,value:t.projects,onChange:G,label:"Projects",renderValue:e=>(0,B.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var a;return(0,B.jsx)(g.A,{label:null===(a=D.find((a=>a._id===e)))||void 0===a?void 0:a.ProjectName},e)}))}),children:D.map((e=>(0,B.jsx)(w.A,{value:e._id,children:e.ProjectName},e._id)))})]})]})}),(0,B.jsxs)(L.A,{children:[(0,B.jsx)(o.A,{onClick:J,color:"primary",children:"Cancel"}),(0,B.jsx)(o.A,{onClick:H,color:"primary",variant:"contained",children:"Create Team"})]})]})]})}},11046:(e,a,t)=>{t.d(a,{A:()=>s});var r=t(50214);const s={getAll:()=>r.A.get("/projects"),get:e=>r.A.get("/projects/".concat(e)),create:e=>r.A.post("/projects",e),update:(e,a)=>r.A.put("/projects/".concat(e),a),remove:e=>r.A.delete("/projects/".concat(e)),removeAll:()=>r.A.delete("/projects"),findByTitle:e=>r.A.get("/projects?title=".concat(e)),getProjectProgress:e=>r.A.get("/projects/".concat(e,"/progress")),getBudgetAnalytics:e=>r.A.get("/projects/".concat(e,"/budget-analytics")),getTeamPerformance:e=>r.A.get("/projects/".concat(e,"/team-performance")),searchProjects:e=>r.A.post("/projects/search",e),getProjectMessages:e=>r.A.get("/projects/".concat(e,"/messages")),sendProjectMessage:(e,a)=>r.A.post("/projects/".concat(e,"/messages"),a),exportProjectReport:(e,a)=>r.A.get("/projects/".concat(e,"/export/").concat(a)),scheduleReport:(e,a)=>r.A.post("/projects/".concat(e,"/schedule-report"),a),getProjectAnalytics:e=>r.A.get("/projects/".concat(e,"/analytics")),getProjectById:e=>r.A.get("/projects/id/".concat(e)),findByTeams:e=>r.A.get("/projects/teams/".concat(e))}}}]);
//# sourceMappingURL=872.6fc5e5ef.chunk.js.map