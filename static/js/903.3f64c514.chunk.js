"use strict";(self.webpackChunkpfefront=self.webpackChunkpfefront||[]).push([[903],{82754:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var o=r(89379),s=r(65043),a=r(90035),i=r(4219),n=r(35316),l=r(14194),c=r(7353),d=r(15795),p=r(53193),x=r(79190),h=r(69285),u=r(32143),g=r(29347),A=r(42518),j=r(81637),m=r(98008),f=r(11046),v=r(70579);const b=e=>{let{open:t,onClose:r,projectId:b,userId:y}=e;const[D,S]=(0,s.useState)(!1),[w,C]=(0,s.useState)(""),[k,I]=(0,s.useState)(""),[P,B]=(0,s.useState)([]),[z,E]=(0,s.useState)({name:"",description:"",project:b||"",status:"to do",priority:"medium",startDate:"",dueDate:"",labels:[]});(0,s.useEffect)((()=>{W()}),[]),(0,s.useEffect)((()=>{b&&E((e=>(0,o.A)((0,o.A)({},e),{},{project:b})))}),[b]);const W=async()=>{try{const e=await f.A.getAll();B(e.data)}catch(e){console.error("Error loading projects:",e),C("Failed to load projects")}},N=e=>{const{name:t,value:r}=e.target,s="project"===t?r||"":""===r?void 0:r;console.log("Changing ".concat(t," to:"),s),E((e=>(0,o.A)((0,o.A)({},e),{},{[t]:s})))},L=()=>{E({name:"",description:"",project:b||"",status:"to do",priority:"medium",startDate:"",dueDate:"",labels:[]}),C(""),r()};return(0,v.jsxs)(a.A,{open:t,onClose:L,maxWidth:"sm",fullWidth:!0,children:[(0,v.jsx)(i.A,{children:"Create New Epic"}),(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),C(""),I(""),S(!0);try{const e={name:z.name,description:z.description,status:z.status||"to do",priority:z.priority||"medium",owner:y,project:z.project||null};z.startDate&&(e.startDate=z.startDate),z.dueDate&&(e.dueDate=z.dueDate),console.log("Epic data before submission:",z),console.log("Data being sent to server:",e);const t=await m.A.create(e);console.log("Epic created successfully:",t),r(!0),I("Epic created successfully!")}catch(s){var t,o;const e=(null===(t=s.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||"Failed to create epic";C(e),console.error("Error creating epic:",s)}finally{S(!1)}},children:[(0,v.jsxs)(n.A,{children:[w&&(0,v.jsx)(l.A,{severity:"error",sx:{mb:2},children:w}),k&&(0,v.jsx)(l.A,{severity:"success",sx:{mb:2},children:k}),(0,v.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,v.jsx)(d.A,{name:"name",label:"Epic Name",value:z.name,onChange:N,required:!0,fullWidth:!0}),(0,v.jsx)(d.A,{name:"description",label:"Description",value:z.description,onChange:N,multiline:!0,rows:4,fullWidth:!0}),(0,v.jsxs)(p.A,{fullWidth:!0,children:[(0,v.jsx)(x.A,{children:"Project (Optional)"}),(0,v.jsxs)(h.A,{name:"project",value:z.project||"",onChange:N,label:"Project (Optional)",children:[(0,v.jsx)(u.A,{value:"",children:(0,v.jsx)("em",{children:"None"})}),P.map((e=>(0,v.jsx)(u.A,{value:e._id,children:e.projectName},e._id)))]})]}),(0,v.jsxs)(p.A,{fullWidth:!0,children:[(0,v.jsx)(x.A,{children:"Status"}),(0,v.jsxs)(h.A,{name:"status",value:z.status,onChange:N,label:"Status",children:[(0,v.jsx)(u.A,{value:"to do",children:"To Do"}),(0,v.jsx)(u.A,{value:"in progress",children:"In Progress"}),(0,v.jsx)(u.A,{value:"done",children:"Done"})]})]}),(0,v.jsxs)(p.A,{fullWidth:!0,children:[(0,v.jsx)(x.A,{children:"Priority"}),(0,v.jsxs)(h.A,{name:"priority",value:z.priority,onChange:N,label:"Priority",children:[(0,v.jsx)(u.A,{value:"highest",children:"Highest"}),(0,v.jsx)(u.A,{value:"high",children:"High"}),(0,v.jsx)(u.A,{value:"medium",children:"Medium"}),(0,v.jsx)(u.A,{value:"low",children:"Low"}),(0,v.jsx)(u.A,{value:"lowest",children:"Lowest"})]})]}),(0,v.jsx)(d.A,{name:"startDate",label:"Start Date",type:"date",value:z.startDate,onChange:N,fullWidth:!0,InputLabelProps:{shrink:!0}}),(0,v.jsx)(d.A,{name:"dueDate",label:"Due Date",type:"date",value:z.dueDate,onChange:N,fullWidth:!0,InputLabelProps:{shrink:!0}})]})]}),(0,v.jsxs)(g.A,{children:[(0,v.jsx)(A.A,{onClick:L,children:"Cancel"}),(0,v.jsx)(A.A,{type:"submit",variant:"contained",disabled:D,sx:{backgroundColor:"#0052CC","&:hover":{backgroundColor:"#0747A6"}},children:D?(0,v.jsx)(j.A,{size:24}):"Create Epic"})]})]})]})}},83903:(e,t,r)=>{r.r(t),r.d(t,{default:()=>te});var o=r(89379),s=r(65043),a=r(73216),i=r(12110),n=r(26494),l=r(94496),c=r(7353),d=r(53193),p=r(69285),x=r(32143),h=r(43845),u=r(27600),g=r(42518),A=r(71806),j=r(84882),m=r(28076),f=r(10039),v=r(73460),b=r(79650),y=r(61596),D=r(17392),S=r(92314),w=r(55263),C=r(22698),k=r(88446),I=r(81045),P=r(15078),B=r(84511),z=r(59275),E=r(10529),W=r(15337),N=r(95190),L=r(14149),T=r(80638),_=r(93287),H=r(70141),R=r(19667),F=r(9345),O=r(3632),M=r(11046),G=r(54859),K=r(98008),q=r(28016),V=r(82754),Q=r(42734),U=r(35964),X=r(30335),Y=r(67537),Z=r(70579);const J="epic",$=e=>{let{epic:t,onDrop:r}=e;const[{isDragging:o},s]=(0,Q.i)((()=>({type:J,item:{id:t._id,status:t.status},collect:e=>({isDragging:e.isDragging()})})));return(0,Z.jsx)("div",{ref:s,style:{opacity:o?.5:1,cursor:"move"},children:(0,Z.jsxs)(i.A,{sx:{"&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.15)",transform:"translateY(-2px)",transition:"all 0.2s ease"}},children:[(0,Z.jsxs)(n.A,{children:[(0,Z.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:t.name}),(0,Z.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t.description}),(0,Z.jsxs)(c.A,{sx:{display:"flex",gap:1,alignItems:"center",mb:2},children:[(0,Z.jsx)(d.A,{size:"small",sx:{minWidth:120},children:(0,Z.jsxs)(p.A,{value:t.status||"to do",onChange:e=>handleStatusChange(t._id,e.target.value),sx:{height:32},children:[(0,Z.jsx)(x.A,{value:"to do",children:"To Do"}),(0,Z.jsx)(x.A,{value:"in progress",children:"In Progress"}),(0,Z.jsx)(x.A,{value:"done",children:"Completed"})]})}),(0,Z.jsx)(h.A,{label:t.priority,size:"small",color:"high"===t.priority?"error":"medium"===t.priority?"warning":"info",variant:"outlined"})]}),t.startDate&&(0,Z.jsxs)(l.A,{variant:"caption",color:"text.secondary",display:"block",children:["Start: ",new Date(t.startDate).toLocaleDateString()]}),t.dueDate&&(0,Z.jsxs)(l.A,{variant:"caption",color:"text.secondary",display:"block",children:["Due: ",new Date(t.dueDate).toLocaleDateString()]})]}),(0,Z.jsx)(u.A,{children:(0,Z.jsx)(g.A,{size:"small",onClick:()=>handleItemClick(t,"epic"),children:"View Details"})})]})})},ee=e=>{let{status:t,title:r,epics:o,onDrop:s}=e;const[{isOver:a},i]=(0,U.H)((()=>({accept:J,drop:e=>s(e.id,t),collect:e=>({isOver:e.isOver()})})));return(0,Z.jsxs)(c.A,{ref:i,sx:{width:300,minWidth:300,bgcolor:a?"action.hover":"background.paper",borderRadius:1,p:2,display:"flex",flexDirection:"column",transition:"background-color 0.2s ease"},children:[(0,Z.jsxs)(l.A,{variant:"h6",sx:{mb:2},children:[r," (",(null===o||void 0===o?void 0:o.length)||0,")"]}),(0,Z.jsx)(c.A,{sx:{minHeight:100,display:"flex",flexDirection:"column",gap:2},children:null===o||void 0===o?void 0:o.map(((e,t)=>(0,Z.jsx)($,{epic:e,index:t},e._id)))})]})},te=()=>{(0,a.Zp)();const{id:e}=(0,a.g)(),[t,r]=(0,s.useState)(null),[i,n]=(0,s.useState)([]),[u,Q]=(0,s.useState)([]),[U,J]=(0,s.useState)([]),[$,te]=(0,s.useState)(!0),[re,oe]=(0,s.useState)(null),[se,ae]=(0,s.useState)(null),[ie,ne]=(0,s.useState)(null),[le,ce]=(0,s.useState)(!1),[de,pe]=(0,s.useState)(localStorage.getItem("projectType")),[xe,he]=(0,s.useState)(""),[ue,ge]=(0,s.useState)(!1),[Ae,je]=(0,s.useState)("table"),[me,fe]=(0,s.useState)({"to do":[],"in progress":[],done:[]}),[ve,be]=(0,s.useState)(null),[ye,De]=(0,s.useState)(null),Se="to do",we="in progress",Ce="done";(0,s.useEffect)((()=>{e&&(async()=>{te(!0);try{const t=await M.A.getProjectById(e);r(t.data),he(t.data.key);const o=await K.A.getByProject(e);console.log("Epic data from server:",o.data),Q(o.data);const s=await G.A.getByProject(e);n(s.data);const a=await q.A.getByProject(e);J(a.data)}catch(t){console.error("Error fetching project data:",t),oe(t.message)}finally{te(!1)}})()}),[e]),(0,s.useEffect)((()=>{const e=()=>{const e=localStorage.getItem("projectType");pe(e)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),(0,s.useEffect)((()=>{const e=requestAnimationFrame((()=>{}));return()=>{cancelAnimationFrame(e)}}),[]),(0,s.useEffect)((()=>{if(u.length>0){console.log("Current epics:",u);const e={[Se]:[],[we]:[],[Ce]:[]};u.forEach((t=>{const r=t.status||Se;e[r]?e[r].push(t):e[Se].push(t)})),console.log("Grouped epics:",e),fe(e)}}),[u]);const ke=async(t,r)=>{console.log("Changing status:",{epicId:t,newStatus:r});const o=u.find((e=>e._id===t));if(o)try{const s={name:o.name,description:o.description,priority:o.priority,startDate:o.startDate,dueDate:o.dueDate,project:e,status:r.toLowerCase()};console.log("Sending update for epic:",s),await K.A.update(t,s);const a=await K.A.getByProject(e);Q(a.data)}catch(re){var s;console.error("Error updating epic status:",(null===(s=re.response)||void 0===s?void 0:s.data)||re.message),oe("Failed to update epic status. Please try again.")}else console.error("Epic not found:",t)},Ie=(e,t)=>{ae(e),ne(t),ce(!1)},Pe=e=>{ne(e),ae(null),ce(!0)},Be=async(t,r)=>{try{const s=u.find((e=>e._id===t));if(!s)return void console.error("Epic not found:",t);const a=(0,o.A)({},me),i=s.status;a[i]=a[i].filter((e=>e._id!==t));const n=(0,o.A)((0,o.A)({},s),{},{status:r});a[r]=[...a[r]||[],n],fe(a);const l=(0,o.A)((0,o.A)({},s),{},{status:r,project:e});delete l._id,console.log("Updating epic status via drag:",l),await K.A.update(t,l);const c=await K.A.getByProject(e);Q(c.data)}catch(re){var s;console.error("Error updating epic status:",(null===(s=re.response)||void 0===s?void 0:s.data)||re.message),oe("Failed to update epic status. Please try again.");const r=await K.A.getByProject(e);Q(r.data)}},ze=()=>se?(0,Z.jsx)(c.A,{sx:{maxWidth:800,margin:"0 auto"},children:(0,Z.jsxs)(c.A,{sx:{backgroundColor:"#fff",borderRadius:2,mb:3},children:[(0,Z.jsxs)(c.A,{sx:{mb:3},children:[(0,Z.jsx)(l.A,{variant:"h5",gutterBottom:!0,sx:{color:"#1976d2",fontWeight:500},children:"epic"===ie?"Epic Details":"backlog"===ie?"Backlog Details":"Sprint Details"}),(0,Z.jsx)(c.A,{sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontSize:"0.75rem",fontWeight:500,padding:"2px 8px",borderRadius:"4px"},children:se.status||"to do"})]}),(0,Z.jsxs)(c.A,{sx:{mb:4},children:[(0,Z.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#546e7a",fontWeight:500,fontSize:"0.875rem"},children:"Name"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238"},children:se.name})]}),(0,Z.jsxs)(c.A,{sx:{mb:4},children:[(0,Z.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#546e7a",fontWeight:500,fontSize:"0.875rem"},children:"Description"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238"},children:se.description||"No description available"})]}),"sprint"===ie&&(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#546e7a",fontWeight:500,fontSize:"0.875rem"},children:"Sprint Details"}),(0,Z.jsxs)(c.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:3,mt:2},children:[(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(l.A,{variant:"caption",sx:{color:"#546e7a"},children:"Start Date"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238",fontWeight:500},children:new Date(se.startDate).toLocaleDateString()})]}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(l.A,{variant:"caption",sx:{color:"#546e7a"},children:"End Date"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238",fontWeight:500},children:new Date(se.endDate).toLocaleDateString()})]})]}),se.goal&&(0,Z.jsxs)(c.A,{sx:{mt:3},children:[(0,Z.jsx)(l.A,{variant:"caption",sx:{color:"#546e7a"},children:"Goal"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238",mt:.5},children:se.goal})]})]})]})}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(c.A,{sx:{mb:3,display:"flex",alignItems:"center",gap:2},children:[(0,Z.jsx)(l.A,{variant:"h5",children:t.projectName}),(0,Z.jsx)(c.A,{sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontSize:"0.75rem",fontWeight:500,padding:"2px 8px",borderRadius:"4px"},children:"Planned"})]}),(0,Z.jsxs)(c.A,{sx:{p:3,mb:3},children:[(0,Z.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Description"}),(0,Z.jsx)(l.A,{variant:"body1",paragraph:!0,children:t.description||"No description available"})]}),(0,Z.jsxs)(c.A,{sx:{p:3},children:[(0,Z.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Project Details"}),(0,Z.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,Z.jsxs)(l.A,{variant:"body1",children:[(0,Z.jsx)("strong",{children:"Project Type:"})," ",t.projectType]}),(0,Z.jsxs)(l.A,{variant:"body1",children:[(0,Z.jsx)("strong",{children:"Start Date:"})," ",new Date(t.startDate).toLocaleDateString()]}),(0,Z.jsxs)(l.A,{variant:"body1",children:[(0,Z.jsx)("strong",{children:"End Date:"})," ",new Date(t.endDate).toLocaleDateString()]})]})]})]}),Ee=(S.A,w.A,D.A,_.A,C.A,T.A,k.A,z.A,k.A,l.A,null===t||void 0===t||t.name,D.A,L.A,()=>{ge(!1)});return $?(0,Z.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}):re?(0,Z.jsx)(c.A,{sx:{color:"error.main",p:2},children:re}):t?(0,Z.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",backgroundColor:"#f5f5f5"},children:[(0,Z.jsx)(S.A,{position:"fixed",sx:{zIndex:1100,backgroundColor:"#1976d2",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},children:(0,Z.jsxs)(w.A,{sx:{minHeight:"64px !important"},children:[(0,Z.jsx)(D.A,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:(0,Z.jsx)(_.A,{})}),(0,Z.jsxs)(C.A,{separator:(0,Z.jsx)(T.A,{fontSize:"small",sx:{color:"rgba(255,255,255,0.7)"}}),"aria-label":"breadcrumb",sx:{flex:1,"& .MuiBreadcrumbs-li":{display:"flex",alignItems:"center"}},children:[(0,Z.jsxs)(k.A,{color:"inherit",href:"/",sx:{display:"flex",alignItems:"center",color:"white",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:[(0,Z.jsx)(z.A,{sx:{mr:.5},fontSize:"small"}),"Home"]}),(0,Z.jsx)(k.A,{color:"inherit",href:"/projects",sx:{color:"white",textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Projects"}),(0,Z.jsx)(l.A,{color:"rgba(255,255,255,0.7)",children:(null===t||void 0===t?void 0:t.name)||"Project Details"})]}),(0,Z.jsx)(D.A,{color:"inherit",children:(0,Z.jsx)(L.A,{})})]})}),(0,Z.jsxs)(c.A,{sx:{display:"flex",flex:1},children:[(0,Z.jsxs)(c.A,{sx:{width:"240px",backgroundColor:"#fff",borderRight:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",flexDirection:"column",height:"100vh",position:"fixed",left:0,top:64,color:"#1976d2",zIndex:100},children:[(0,Z.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",px:3,py:3,borderBottom:"1px solid rgba(0, 0, 0, 0.12)",mb:1},children:[(0,Z.jsx)(I.A,{sx:{bgcolor:"#1976d2",width:40,height:40,fontSize:"1.2rem",fontWeight:600,mr:2},children:null===xe||void 0===xe?void 0:xe.charAt(0)}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(l.A,{variant:"subtitle1",sx:{color:"#1976d2",fontWeight:600,fontSize:"1rem",lineHeight:1.2},children:xe}),(0,Z.jsx)(l.A,{variant:"caption",sx:{color:"rgba(25, 118, 210, 0.7)",fontSize:"0.75rem"},children:(null===t||void 0===t?void 0:t.name)||"Project"})]})]}),(0,Z.jsxs)(c.A,{sx:{flex:1,overflow:"auto"},children:[(0,Z.jsx)(c.A,{sx:{mt:2},children:(0,Z.jsxs)(l.A,{variant:"subtitle2",onClick:()=>Pe("epic"),sx:{px:3,py:2.5,backgroundColor:"epic"===ie&&le?"rgba(25, 118, 210, 0.08)":"transparent",color:"epic"===ie&&le?"#1976d2":"rgba(25, 118, 210, 0.7)",fontWeight:500,fontSize:"0.875rem",letterSpacing:"0.3px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:2,"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)",color:"#1976d2"}},children:[(0,Z.jsx)(W.A,{fontSize:"small",sx:{color:"inherit",fontSize:"1.25rem"}}),"EPICS"]})}),"Kanban"!==de&&(0,Z.jsx)(c.A,{children:(0,Z.jsxs)(l.A,{variant:"subtitle2",onClick:()=>Pe("backlog"),sx:{px:3,py:2.5,backgroundColor:"backlog"===ie&&le?"rgba(25, 118, 210, 0.08)":"transparent",color:"backlog"===ie&&le?"#1976d2":"rgba(25, 118, 210, 0.7)",fontWeight:500,fontSize:"0.875rem",letterSpacing:"0.3px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:2,"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)",color:"#1976d2"}},children:[(0,Z.jsx)(E.A,{fontSize:"small",sx:{color:"inherit",fontSize:"1.25rem"}}),"BACKLOGS"]})}),"Kanban"!==de&&(0,Z.jsx)(c.A,{children:(0,Z.jsxs)(l.A,{variant:"subtitle2",onClick:()=>Pe("sprint"),sx:{px:3,py:2.5,backgroundColor:"sprint"===ie&&le?"rgba(25, 118, 210, 0.08)":"transparent",color:"sprint"===ie&&le?"#1976d2":"rgba(25, 118, 210, 0.7)",fontWeight:500,fontSize:"0.875rem",letterSpacing:"0.3px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:2,"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)",color:"#1976d2"}},children:[(0,Z.jsx)(N.A,{fontSize:"small",sx:{color:"inherit",fontSize:"1.25rem"}}),"SPRINTS"]})})]})]}),(0,Z.jsx)(c.A,{component:"main",sx:{flex:1,ml:"240px",display:"flex",flexDirection:"column",minHeight:"100vh",position:"relative"},children:(0,Z.jsx)(c.A,{sx:{position:"fixed",top:128,left:"240px",right:0,bottom:0,backgroundColor:"#fff",borderTop:"1px solid rgba(0, 0, 0, 0.12)",borderLeft:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",flexDirection:"column",zIndex:1},children:(0,Z.jsxs)(c.A,{sx:{flex:1,overflow:"auto",padding:"24px",boxShadow:"inset 0 4px 8px rgba(0,0,0,0.05)"},children:["epic"===ie&&!se&&(0,Z.jsxs)(c.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Z.jsxs)(P.A,{value:Ae,exclusive:!0,onChange:(e,t)=>{null!==t&&je(t)},size:"small",sx:{"& .MuiToggleButton-root.Mui-selected":{backgroundColor:"#1976d2",color:"white","&:hover":{backgroundColor:"#1565c0"}}},children:[(0,Z.jsx)(B.A,{value:"table","aria-label":"table view",children:(0,Z.jsx)(R.A,{})}),(0,Z.jsx)(B.A,{value:"card","aria-label":"card view",children:(0,Z.jsx)(F.A,{})})]}),(0,Z.jsx)(g.A,{variant:"contained",color:"primary",onClick:()=>{ge(!0)},startIcon:(0,Z.jsx)(H.A,{}),sx:{borderRadius:"8px",textTransform:"none",fontWeight:600},children:"Create Epic"})]}),"epic"===ie?se?ze():"table"===Ae?(0,Z.jsx)(b.A,{component:y.A,sx:{mt:2},children:(0,Z.jsxs)(A.A,{children:[(0,Z.jsx)(j.A,{children:(0,Z.jsxs)(m.A,{children:[(0,Z.jsx)(f.A,{children:"Name"}),(0,Z.jsx)(f.A,{children:"Description"}),(0,Z.jsx)(f.A,{children:"Status"}),(0,Z.jsx)(f.A,{children:"Priority"}),(0,Z.jsx)(f.A,{children:"Start Date"}),(0,Z.jsx)(f.A,{children:"Due Date"}),(0,Z.jsx)(f.A,{children:"Actions"})]})}),(0,Z.jsx)(v.A,{children:u.map((e=>(0,Z.jsxs)(m.A,{children:[(0,Z.jsx)(f.A,{children:e.name}),(0,Z.jsx)(f.A,{children:e.description}),(0,Z.jsx)(f.A,{children:(0,Z.jsx)(d.A,{size:"small",sx:{minWidth:120},children:(0,Z.jsxs)(p.A,{value:e.status||Se,onChange:t=>ke(e._id,t.target.value),sx:{height:32},children:[(0,Z.jsx)(x.A,{value:Se,children:"To Do"}),(0,Z.jsx)(x.A,{value:we,children:"In Progress"}),(0,Z.jsx)(x.A,{value:Ce,children:"Completed"})]})})}),(0,Z.jsx)(f.A,{children:(0,Z.jsx)(h.A,{label:e.priority,size:"small",color:"high"===e.priority?"error":"medium"===e.priority?"warning":"info",variant:"outlined"})}),(0,Z.jsx)(f.A,{children:e.startDate?new Date(e.startDate).toLocaleDateString():"-"}),(0,Z.jsx)(f.A,{children:e.dueDate?new Date(e.dueDate).toLocaleDateString():"-"}),(0,Z.jsx)(f.A,{children:(0,Z.jsx)(D.A,{size:"small",onClick:()=>Ie(e,"epic"),title:"View Details",children:(0,Z.jsx)(O.A,{fontSize:"small"})})})]},e._id)))})]})}):(()=>{const e=[{id:Se,title:"To Do"},{id:we,title:"In Progress"},{id:Ce,title:"Completed"}];return(0,Z.jsx)(X.Q,{backend:Y.t2,children:(0,Z.jsx)(c.A,{sx:{display:"flex",gap:2,p:2,overflowX:"auto"},children:e.map((e=>(0,Z.jsx)(ee,{status:e.id,title:e.title,epics:me[e.id],onDrop:Be},e.id)))})})})():le?(()=>{let e=[],t=[];switch(ie){case"epic":e=u,t=[{field:"name",headerName:"Name",flex:1},{field:"status",headerName:"Status",width:120},{field:"description",headerName:"Description",flex:1.5}];break;case"backlog":e=U,t=[{field:"name",headerName:"Name",flex:1},{field:"status",headerName:"Status",width:120},{field:"items",headerName:"Items",width:100,renderCell:e=>e.value?e.value.length:0}];break;case"sprint":e=i,t=[{field:"name",headerName:"Name",flex:1},{field:"status",headerName:"Status",width:120},{field:"startDate",headerName:"Start Date",width:120,renderCell:e=>new Date(e.value).toLocaleDateString()},{field:"endDate",headerName:"End Date",width:120,renderCell:e=>new Date(e.value).toLocaleDateString()}];break;default:return null}return(0,Z.jsx)(c.A,{sx:{maxWidth:800,margin:"0 auto"},children:(0,Z.jsxs)(A.A,{children:[(0,Z.jsx)(j.A,{children:(0,Z.jsx)(m.A,{children:t.map((e=>(0,Z.jsx)(f.A,{sx:{fontWeight:600,backgroundColor:"#f5f5f5",color:"#546e7a"},width:e.width,children:e.headerName},e.field)))})}),(0,Z.jsx)(v.A,{children:e.map((e=>(0,Z.jsx)(m.A,{hover:!0,onClick:()=>Ie(e,ie),sx:{cursor:"pointer","&:hover":{backgroundColor:"#f5f5f5"}},children:t.map((t=>(0,Z.jsx)(f.A,{children:t.renderCell?t.renderCell({value:e[t.field]}):e[t.field]||"-"},t.field)))},e._id)))})]})})})():ze(),(0,Z.jsx)(V.default,{open:ue,onClose:Ee,projectId:e,onEpicAdded:async()=>{try{const t=await K.A.getByProject(e);Q(t.data),Ee()}catch(re){console.error("Error fetching epics:",re)}}})]})})})]})]}):(0,Z.jsx)(c.A,{sx:{p:2},children:"Project not found"})}},28016:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(50214);const s={getAll:()=>o.A.get("/Backlogs"),getById:e=>o.A.get("/Backlogs/id/".concat(e)),getByProject:e=>o.A.get("/Backlogs/projectId/".concat(e)),create:e=>o.A.post("/Backlogs",e),update:(e,t)=>o.A.put("/Backlogs/".concat(e),t),remove:e=>o.A.delete("/Backlogs/".concat(e))}},98008:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(50214);const s=e=>{var t,r,o;const s={name:null===(t=e.name)||void 0===t?void 0:t.trim(),description:null===(r=e.description)||void 0===r?void 0:r.trim(),status:(null===(o=e.status)||void 0===o?void 0:o.toLowerCase())||"to do",priority:(e.priority||"medium").toLowerCase(),startDate:e.startDate||void 0,dueDate:e.dueDate||void 0,owner:e.owner||localStorage.getItem("userId"),watchers:e.watchers||[]};return void 0!==e.project&&(s.project=e.project||null),Object.keys(s).forEach((e=>{void 0===s[e]&&delete s[e]})),console.log("Original epic data:",e),console.log("Transformed epic data:",s),s},a={getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.A.get("/epics",{params:e})},getById:e=>o.A.get("/epics/".concat(e)),getByProject:e=>o.A.get("/epics/project/".concat(e)),create:e=>{const t=s(e);return o.A.post("/epics",t)},update:(e,t)=>{const r=s(t);return console.log("Transformed update data:",r),o.A.put("/epics/".concat(e),r)},remove:e=>o.A.delete("/epics/".concat(e)),updateProgress:e=>o.A.post("/epics/".concat(e,"/progress")),addWatcher:(e,t)=>o.A.post("/epics/".concat(e,"/watchers"),{userId:t}),removeWatcher:(e,t)=>o.A.delete("/epics/".concat(e,"/watchers"),{data:{userId:t}})}},11046:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(50214);const s={getAll:()=>o.A.get("/projects"),get:e=>o.A.get("/projects/".concat(e)),create:e=>o.A.post("/projects",e),update:(e,t)=>o.A.put("/projects/".concat(e),t),remove:e=>o.A.delete("/projects/".concat(e)),removeAll:()=>o.A.delete("/projects"),findByTitle:e=>o.A.get("/projects?title=".concat(e)),getProjectProgress:e=>o.A.get("/projects/".concat(e,"/progress")),getBudgetAnalytics:e=>o.A.get("/projects/".concat(e,"/budget-analytics")),getTeamPerformance:e=>o.A.get("/projects/".concat(e,"/team-performance")),searchProjects:e=>o.A.post("/projects/search",e),getProjectMessages:e=>o.A.get("/projects/".concat(e,"/messages")),sendProjectMessage:(e,t)=>o.A.post("/projects/".concat(e,"/messages"),t),exportProjectReport:(e,t)=>o.A.get("/projects/".concat(e,"/export/").concat(t)),scheduleReport:(e,t)=>o.A.post("/projects/".concat(e,"/schedule-report"),t),getProjectAnalytics:e=>o.A.get("/projects/".concat(e,"/analytics")),getProjectById:e=>o.A.get("/projects/id/".concat(e))}},54859:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(50214);const s={getAll:()=>o.A.get("/sprints"),getSprint:e=>o.A.get("/sprints/id/".concat(e)),create:e=>o.A.post("/sprints",e),update:(e,t)=>o.A.put("/sprints/".concat(e),t),deleteSprint:e=>o.A.delete("/sprints/".concat(e)),updateBacklogItems:(e,t)=>(console.log("Sending backlogItemId:",t),o.A.put("/sprints/".concat(e,"/backlogItems"),{backlogItemId:t})),getByProject:e=>(console.log("Fetching sprints for project:",e),o.A.get("/sprints/project/".concat(e)))}}}]);
//# sourceMappingURL=903.3f64c514.chunk.js.map