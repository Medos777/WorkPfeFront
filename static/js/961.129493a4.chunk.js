"use strict";(self.webpackChunkpfefront=self.webpackChunkpfefront||[]).push([[961],{85961:(e,t,a)=>{a.r(t),a.d(t,{default:()=>re});var r=a(65043),s=a(61596),n=a(7353),o=a(94496),i=a(17843),l=a(68903),c=a(18483),d=a(24993),h=a(24056),f=a(67784),x=a(12110),g=a(26494),p=a(81045),m=a(27600),j=a(17392),u=a(33691),A=a(688),b=a(32143),y=a(2050),k=a(75155),v=a(58558),w=a(83560),S=a(51387),P=a(50108),C=a(82291),D=a(87734),B=a(52185),W=a(6026),R=a(86150),I=a(21327),M=a(38643),T=a(60163),F=a(4240),K=a(17869),X=a(75748),E=a(90168),H=a(99012),L=a(71330),N=a(11046),O=a(54859),z=a(28016),U=a(73216),_=a(33929),Y=a(44416),Z=a(34535),q=a(83455),G=a(31546),J=a(70579);const Q=["#4CAF50","#2196F3","#FFC107","#FF5722","#9C27B0"],V=e=>{let{cx:t,cy:a,midAngle:r,innerRadius:s,outerRadius:n,percent:o,value:i,name:l}=e;const c=Math.PI/180,d=s+.5*(n-s),h=t+d*Math.cos(-r*c),f=a+d*Math.sin(-r*c);return o>0?(0,J.jsx)("text",{x:h,y:f,fill:"white",textAnchor:h>t?"start":"end",dominantBaseline:"central",style:{fontSize:"12px",fontWeight:"500"},children:"".concat(l," (").concat(i,")")}):null},$=e=>(0,_.A)({palette:{mode:e?"dark":"light"}}),ee=(0,Z.Ay)(q.P.div)((e=>{let{theme:t}=e;return{height:"100%","& .MuiCard-root":{height:"100%",background:"dark"===t.palette.mode?(0,G.X4)(t.palette.background.paper,.8):(0,G.X4)(t.palette.background.paper,.9),backdropFilter:"blur(8px)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[10]}}}})),te=(0,Z.Ay)(s.A)((e=>{let{theme:t}=e;return{padding:t.spacing(3),textAlign:"center",background:"dark"===t.palette.mode?(0,G.X4)(t.palette.primary.dark,.12):(0,G.X4)(t.palette.primary.light,.12),backdropFilter:"blur(8px)",transition:"transform 0.3s ease-in-out","&:hover":{transform:"translateY(-4px)"}}})),ae=(0,Z.Ay)(s.A)((e=>{let{theme:t}=e;return{padding:t.spacing(3),background:"dark"===t.palette.mode?(0,G.X4)(t.palette.background.paper,.8):(0,G.X4)(t.palette.background.paper,.9),backdropFilter:"blur(8px)",borderRadius:2*t.shape.borderRadius,boxShadow:t.shadows[4],transition:"all 0.3s ease-in-out","&:hover":{boxShadow:t.shadows[8]}}})),re=()=>{const[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)([]),[_,Z]=(0,r.useState)([]),[re,se]=(0,r.useState)([]),[ne,oe]=(0,r.useState)([]),[ie,le]=(0,r.useState)([]),[ce,de]=(0,r.useState)(1),[he,fe]=(0,r.useState)(0),[xe,ge]=(0,r.useState)(""),[pe,me]=(0,r.useState)(null),[je,ue]=(0,r.useState)(null),Ae=(0,U.Zp)();(0,r.useEffect)((()=>{be()}),[]);const be=async()=>{try{const[e,t,a,r,n]=await Promise.all([H.A.getAll(),L.A.getUserByRole("developer"),N.A.getAll(),O.A.getAll(),z.A.getAll()]);s(e.data),Z(t.data),se(a.data),oe(r.data),le(n.data)}catch(e){console.error("Error fetching data:",e)}},ye=a.filter((e=>e.teamName.toLowerCase().includes(xe.toLowerCase()))),ke=_.filter((e=>e.username.toLowerCase().includes(xe.toLowerCase()))),ve=0===he?ye.slice(6*(ce-1),6*ce):ke.slice(6*(ce-1),6*ce),we=re.map((e=>({name:e.projectName,Progress:Math.min(100,Math.max(0,(Date.now()-new Date(e.startDate).getTime())/(new Date(e.endDate).getTime()-new Date(e.startDate).getTime())*100))}))),Se=[{name:"Completed",value:re.filter((e=>"Completed"===e.status)).length,color:Q[0]},{name:"In Progress",value:re.filter((e=>"In Progress"===e.status)).length,color:Q[1]},{name:"On Hold",value:re.filter((e=>"On Hold"===e.status)).length,color:Q[2]},{name:"Cancelled",value:re.filter((e=>"Cancelled"===e.status)).length,color:Q[3]}].filter((e=>e.value>0)),Pe=[{name:"Completed",value:ne.filter((e=>new Date(e.endDate)<new Date)).length},{name:"Ongoing",value:ne.filter((e=>new Date(e.startDate)<=new Date&&new Date(e.endDate)>=new Date)).length},{name:"Upcoming",value:ne.filter((e=>new Date(e.startDate)>new Date)).length}],Ce=ie.map((e=>{var t;return{name:e.name,items:(null===(t=e.items)||void 0===t?void 0:t.length)||0}})),De=()=>{me(null),ue(null)};return(0,J.jsxs)(Y.A,{theme:$(e),children:[(0,J.jsxs)(n.A,{component:q.P.div,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},sx:{p:3,minHeight:"100vh",background:e=>"dark"===e.palette.mode?"linear-gradient(45deg, #1a237e 0%, #121212 100%)":"linear-gradient(45deg, #e3f2fd 0%, #ffffff 100%)"},children:[(0,J.jsxs)(n.A,{component:q.P.div,initial:{y:-20},animate:{y:0},transition:{duration:.5},display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:[(0,J.jsx)(o.A,{variant:"h4",sx:{fontWeight:700,background:e=>"dark"===e.palette.mode?"linear-gradient(45deg, #90caf9 0%, #64b5f6 100%)":"linear-gradient(45deg, #1976d2 0%, #1565c0 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Dashboard"}),(0,J.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,J.jsx)(i.A,{checked:e,onChange:()=>t(!e),sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#90caf9"}}}),(0,J.jsx)(o.A,{children:"Dark Mode"})]})]}),(0,J.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,J.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,component:q.P.div,whileHover:{scale:1.02},children:(0,J.jsxs)(te,{children:[(0,J.jsx)(o.A,{variant:"h6",color:"primary",gutterBottom:!0,children:"Total Projects"}),(0,J.jsx)(o.A,{variant:"h3",sx:{fontWeight:700},children:re.length})]})}),(0,J.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,component:q.P.div,whileHover:{scale:1.02},children:(0,J.jsxs)(te,{children:[(0,J.jsx)(o.A,{variant:"h6",color:"primary",gutterBottom:!0,children:"Total Teams"}),(0,J.jsx)(o.A,{variant:"h3",sx:{fontWeight:700},children:a.length})]})}),(0,J.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,component:q.P.div,whileHover:{scale:1.02},children:(0,J.jsxs)(te,{children:[(0,J.jsx)(o.A,{variant:"h6",color:"primary",gutterBottom:!0,children:"Total Members"}),(0,J.jsx)(o.A,{variant:"h3",sx:{fontWeight:700},children:_.length})]})})]}),(0,J.jsx)(n.A,{mt:4,children:(0,J.jsxs)(ae,{children:[(0,J.jsx)(o.A,{variant:"h6",mb:2,sx:{fontWeight:600},children:"Project Progression"}),(0,J.jsx)(P.u,{width:"100%",height:300,children:(0,J.jsxs)(C.E,{data:we,children:[(0,J.jsx)(D.d,{strokeDasharray:"3 3",stroke:e?"#ffffff20":"#00000020"}),(0,J.jsx)(B.W,{dataKey:"name",stroke:e?"#ffffff80":"#00000080"}),(0,J.jsx)(W.h,{stroke:e?"#ffffff80":"#00000080"}),(0,J.jsx)(R.m,{contentStyle:{background:e?"#1a1a1a":"#ffffff",border:"none",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"}}),(0,J.jsx)(I.s,{}),(0,J.jsx)(M.y,{dataKey:"Progress",fill:"#8884d8",radius:[4,4,0,0]})]})})]})}),(0,J.jsxs)(l.Ay,{container:!0,spacing:3,mt:4,children:[(0,J.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,J.jsx)(ae,{children:(0,J.jsxs)(n.A,{sx:{position:"relative"},children:[(0,J.jsx)(o.A,{variant:"h6",mb:2,sx:{fontWeight:600},children:"Project Status Distribution"}),0===Se.length?(0,J.jsx)(n.A,{display:"flex",alignItems:"center",justifyContent:"center",height:300,children:(0,J.jsx)(o.A,{variant:"body1",color:"text.secondary",children:"No project data available"})}):(0,J.jsx)(P.u,{width:"100%",height:300,children:(0,J.jsxs)(T.r,{children:[(0,J.jsx)(F.F,{data:Se,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,labelLine:!1,label:V,children:Se.map(((t,a)=>(0,J.jsx)(K.f,{fill:t.color,stroke:e?"#121212":"#ffffff",strokeWidth:2},"cell-".concat(a))))}),(0,J.jsx)(c.A,{contentStyle:{background:e?"#1a1a1a":"#ffffff",border:"none",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},formatter:(e,t)=>["".concat(e," Project").concat(1!==e?"s":""),t]}),(0,J.jsx)(I.s,{verticalAlign:"bottom",height:36,content:t=>{let{payload:a}=t;return(0,J.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:2,mt:2},children:a.map(((t,a)=>(0,J.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,J.jsx)(n.A,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:t.color}}),(0,J.jsx)(o.A,{variant:"body2",sx:{color:e?"#ffffff":"#000000"},children:t.value})]},"legend-".concat(a))))})}})]})}),(0,J.jsxs)(n.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",pointerEvents:"none"},children:[(0,J.jsx)(o.A,{variant:"h4",sx:{fontWeight:700,color:e?"#ffffff":"#000000"},children:re.length}),(0,J.jsx)(o.A,{variant:"body2",sx:{color:e?"#ffffff80":"#00000080"},children:"Total Projects"})]})]})})}),(0,J.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,J.jsxs)(ae,{children:[(0,J.jsx)(o.A,{variant:"h6",mb:2,sx:{fontWeight:600},children:"Project Completion Over Time"}),(0,J.jsx)(P.u,{width:"100%",height:300,children:(0,J.jsxs)(X.b,{data:we,children:[(0,J.jsx)(D.d,{strokeDasharray:"3 3",stroke:e?"#ffffff20":"#00000020"}),(0,J.jsx)(B.W,{dataKey:"name",stroke:e?"#ffffff80":"#00000080"}),(0,J.jsx)(W.h,{stroke:e?"#ffffff80":"#00000080"}),(0,J.jsx)(c.A,{contentStyle:{background:e?"#1a1a1a":"#ffffff",border:"none",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"}}),(0,J.jsx)(I.s,{verticalAlign:"bottom",height:36,formatter:t=>(0,J.jsx)("span",{style:{color:e?"#ffffff":"#000000"},children:t})}),(0,J.jsx)(E.N,{type:"monotone",dataKey:"Progress",stroke:"#8884d8",strokeWidth:2,dot:{stroke:"#8884d8",strokeWidth:2,r:4,fill:e?"#1a1a1a":"#ffffff"},activeDot:{stroke:"#8884d8",strokeWidth:2,r:6,fill:e?"#1a1a1a":"#ffffff"}})]})})]})})]}),(0,J.jsxs)(l.Ay,{container:!0,spacing:3,mt:4,children:[(0,J.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,J.jsxs)(ae,{children:[(0,J.jsx)(o.A,{variant:"h6",mb:2,sx:{fontWeight:600},children:"Sprint Status Distribution"}),(0,J.jsx)(P.u,{width:"100%",height:300,children:(0,J.jsxs)(T.r,{children:[(0,J.jsx)(F.F,{data:Pe,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:120,label:!0,children:Pe.map(((e,t)=>(0,J.jsx)(K.f,{fill:Q[t%Q.length]},"cell-".concat(t))))}),(0,J.jsx)(c.A,{contentStyle:{background:e?"#1a1a1a":"#ffffff",border:"none",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"}}),(0,J.jsx)(I.s,{verticalAlign:"bottom",height:36,formatter:t=>(0,J.jsx)("span",{style:{color:e?"#ffffff":"#000000"},children:t})})]})})]})}),(0,J.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,J.jsxs)(ae,{children:[(0,J.jsx)(o.A,{variant:"h6",mb:2,sx:{fontWeight:600},children:"Backlog Items per Backlog"}),(0,J.jsx)(P.u,{width:"100%",height:300,children:(0,J.jsxs)(C.E,{data:Ce,children:[(0,J.jsx)(D.d,{strokeDasharray:"3 3",stroke:e?"#ffffff20":"#00000020"}),(0,J.jsx)(B.W,{dataKey:"name",stroke:e?"#ffffff80":"#00000080"}),(0,J.jsx)(W.h,{stroke:e?"#ffffff80":"#00000080"}),(0,J.jsx)(c.A,{contentStyle:{background:e?"#1a1a1a":"#ffffff",border:"none",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"}}),(0,J.jsx)(I.s,{verticalAlign:"bottom",height:36,formatter:t=>(0,J.jsx)("span",{style:{color:e?"#ffffff":"#000000"},children:t})}),(0,J.jsx)(M.y,{dataKey:"items",fill:"#82ca9d",radius:[4,4,0,0]})]})})]})})]}),(0,J.jsxs)(n.A,{mt:4,children:[(0,J.jsxs)(n.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,sx:{background:e=>(0,G.X4)(e.palette.background.paper,.6),backdropFilter:"blur(8px)",borderRadius:2,p:2},children:[(0,J.jsxs)(d.A,{value:he,onChange:(e,t)=>fe(t),sx:{"& .MuiTabs-indicator":{height:3,borderRadius:"3px"},"& .MuiTab-root":{textTransform:"none",fontWeight:600,minWidth:100}},children:[(0,J.jsx)(h.A,{label:"Teams"}),(0,J.jsx)(h.A,{label:"Members"})]}),(0,J.jsx)(f.A,{size:"small",placeholder:"Search...",value:xe,onChange:e=>ge(e.target.value),sx:{ml:2,"& .MuiOutlinedInput-root":{borderRadius:2,background:e=>(0,G.X4)(e.palette.background.paper,.8)}}})]}),(0,J.jsx)(l.Ay,{container:!0,spacing:3,children:ve.map(((e,t)=>{var a;return(0,J.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,J.jsx)(ee,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:(0,J.jsxs)(x.A,{children:[(0,J.jsx)(g.A,{children:(0,J.jsxs)(n.A,{display:"flex",alignItems:"center",mb:2,children:[(0,J.jsx)(p.A,{sx:{bgcolor:"primary.main",mr:2,width:56,height:56},children:0===he?(0,J.jsx)(k.A,{}):e.username.charAt(0)}),(0,J.jsxs)(n.A,{children:[(0,J.jsx)(o.A,{variant:"h6",sx:{fontWeight:600},children:0===he?e.teamName:e.username}),(0,J.jsx)(o.A,{variant:"body2",color:"text.secondary",children:0===he?"".concat((null===(a=e.members)||void 0===a?void 0:a.length)||0," Members"):"Role: ".concat(e.role)})]})]})}),(0,J.jsx)(m.A,{sx:{justifyContent:"flex-end"},children:(0,J.jsx)(j.A,{onClick:t=>((e,t)=>{me(e.currentTarget),ue(t)})(t,e),sx:{"&:hover":{background:e=>(0,G.X4)(e.palette.primary.main,.1)}},children:(0,J.jsx)(v.A,{})})})]})})},e._id)}))}),(0,J.jsx)(u.A,{count:Math.ceil((0===he?ye:ke).length/6),page:ce,onChange:(e,t)=>de(t),sx:{mt:4,display:"flex",justifyContent:"center","& .MuiPaginationItem-root":{borderRadius:2}}})]})]}),(0,J.jsxs)(A.A,{anchorEl:pe,open:Boolean(pe),onClose:De,PaperProps:{sx:{mt:1,borderRadius:2,boxShadow:e=>e.shadows[8],"& .MuiMenuItem-root":{px:2,py:1,borderRadius:1,mx:.5,my:.25}}},children:[(0,J.jsxs)(b.A,{onClick:()=>{Ae(0===he?"/team/edit/".concat(je._id):"/user/edit/".concat(je._id)),De()},children:[(0,J.jsx)(y.A,{children:(0,J.jsx)(w.A,{fontSize:"small",color:"primary"})}),"Edit"]}),(0,J.jsxs)(b.A,{onClick:async()=>{De()},sx:{color:"error.main"},children:[(0,J.jsx)(y.A,{children:(0,J.jsx)(S.A,{fontSize:"small",color:"error"})}),"Delete"]})]})]})}},28016:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(50214);const s={getAll:()=>r.A.get("/Backlogs"),getById:e=>r.A.get("/Backlogs/id/".concat(e)),getByProject:e=>r.A.get("/Backlogs/projectId/".concat(e)),create:e=>r.A.post("/Backlogs",e),update:(e,t)=>r.A.put("/Backlogs/".concat(e),t),remove:e=>r.A.delete("/Backlogs/".concat(e)),findByUser:e=>r.A.get("/Backlogs/user/".concat(e))}},11046:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(50214);const s={getAll:()=>r.A.get("/projects"),get:e=>r.A.get("/projects/".concat(e)),create:e=>r.A.post("/projects",e),update:(e,t)=>r.A.put("/projects/".concat(e),t),remove:e=>r.A.delete("/projects/".concat(e)),removeAll:()=>r.A.delete("/projects"),findByTitle:e=>r.A.get("/projects?title=".concat(e)),getProjectProgress:e=>r.A.get("/projects/".concat(e,"/progress")),getBudgetAnalytics:e=>r.A.get("/projects/".concat(e,"/budget-analytics")),getTeamPerformance:e=>r.A.get("/projects/".concat(e,"/team-performance")),searchProjects:e=>r.A.post("/projects/search",e),getProjectMessages:e=>r.A.get("/projects/".concat(e,"/messages")),sendProjectMessage:(e,t)=>r.A.post("/projects/".concat(e,"/messages"),t),exportProjectReport:(e,t)=>r.A.get("/projects/".concat(e,"/export/").concat(t)),scheduleReport:(e,t)=>r.A.post("/projects/".concat(e,"/schedule-report"),t),getProjectAnalytics:e=>r.A.get("/projects/".concat(e,"/analytics")),getProjectById:e=>r.A.get("/projects/id/".concat(e)),findByTeams:e=>r.A.get("/projects/teams/".concat(e))}},54859:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(50214);const s={getAll:()=>r.A.get("/sprints"),getSprint:e=>r.A.get("/sprints/id/".concat(e)),create:e=>r.A.post("/sprints",e),update:(e,t)=>r.A.put("/sprints/".concat(e),t),deleteSprint:e=>r.A.delete("/sprints/".concat(e)),updateBacklogItems:(e,t)=>(console.log("Sending backlogItemId:",t),r.A.put("/sprints/".concat(e,"/backlogItems"),{backlogItemId:t})),getByProject:e=>(console.log("Fetching sprints for project:",e),r.A.get("/sprints/project/".concat(e)))}}}]);
//# sourceMappingURL=961.129493a4.chunk.js.map