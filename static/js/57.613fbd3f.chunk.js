"use strict";(self.webpackChunkpfefront=self.webpackChunkpfefront||[]).push([[57],{2057:(e,t,s)=>{s.r(t),s.d(t,{default:()=>U});var l=s(65043),a=s(7353),r=s(81637),n=s(94496),c=s(42518),i=s(68903),o=s(15795),d=s(53193),A=s(79190),h=s(69285),j=s(32143),p=s(79650),u=s(71806),x=s(84882),g=s(28076),m=s(10039),y=s(73460),v=s(18483),w=s(17392),f=s(43845),b=s(81045),P=s(89735),S=s(688),C=s(2050),k=s(15337),B=s(70141),I=s(79484),T=s(58558),z=s(83560),E=s(51387),M=s(19581),L=s(94160),D=s(11046),_=s(54859),H=s(73216),W=s(70579);const R={highest:{color:"error",icon:"\u26a1",label:"Highest"},high:{color:"warning",icon:"\u2191",label:"High"},medium:{color:"info",icon:"\u2192",label:"Medium"},low:{color:"success",icon:"\u2193",label:"Low"},lowest:{color:"default",icon:"\u2193\u2193",label:"Lowest"}},N={story:{color:"primary",icon:(0,W.jsx)(k.A,{}),label:"Story"},task:{color:"info",icon:(0,W.jsx)(k.A,{}),label:"Task"},bug:{color:"error",icon:(0,W.jsx)(k.A,{}),label:"Bug"},epic:{color:"secondary",icon:(0,W.jsx)(k.A,{}),label:"Epic"}},U=()=>{const{projectId:e}=(0,H.g)(),[t,s]=(0,l.useState)([]),[U,V]=(0,l.useState)(!0),[F,G]=(0,l.useState)(0),[O,K]=(0,l.useState)(""),[Z,q]=(0,l.useState)("all"),[J,Q]=(0,l.useState)("all"),[X,Y]=(0,l.useState)(e||"all"),[$,ee]=(0,l.useState)("all"),[te,se]=(0,l.useState)("all"),[le,ae]=(0,l.useState)([]),[re,ne]=(0,l.useState)([]),[ce,ie]=(0,l.useState)([]),[oe,de]=(0,l.useState)(null),[Ae,he]=(0,l.useState)(null),je=(0,H.Zp)();(0,l.useEffect)((()=>{(async()=>{V(!0);try{const[e,t]=await Promise.all([D.A.getAll(),_.A.getAll()]);if(ae(e.data),ie(t.data),"all"!==X){const e=await L.A.getByProject(X);ne(e.data.filter((e=>"epic"===e.type)))}let l;l="all"!==X?await L.A.getByProject(X):"all"!==$?await L.A.getByEpic($):"all"!==te?await L.A.getBySprint(te):await L.A.getAll(),s(l.data)}catch(e){console.error("Error fetching data:",e)}finally{V(!1)}})()}),[X,$,te]);const pe=t.filter((e=>{var t,s,l;const a=null!==(t=(null===(s=e.title)||void 0===s?void 0:s.toLowerCase().includes(O.toLowerCase()))||(null===(l=e.key)||void 0===l?void 0:l.toLowerCase().includes(O.toLowerCase())))&&void 0!==t&&t,r="all"===Z||e.status&&e.status.toLowerCase()===Z.toLowerCase(),n="all"===J||e.type&&e.type.toLowerCase()===J.toLowerCase();return a&&r&&n}));return U?(0,W.jsx)(a.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:(0,W.jsx)(r.A,{})}):(0,W.jsxs)(a.A,{sx:{width:"100%",p:3},children:[(0,W.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,W.jsx)(n.A,{variant:"h4",component:"h1",children:"Issues"}),(0,W.jsx)(c.A,{variant:"contained",startIcon:(0,W.jsx)(B.A,{}),onClick:()=>je(e?"/projects/".concat(e,"/issues/add"):"/issues/add"),children:"Add Issue"})]}),(0,W.jsxs)(i.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,W.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,W.jsx)(o.A,{fullWidth:!0,label:"Search",value:O,onChange:e=>K(e.target.value),InputProps:{startAdornment:(0,W.jsx)(I.A,{sx:{mr:1}})}})}),(0,W.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,W.jsxs)(d.A,{fullWidth:!0,children:[(0,W.jsx)(A.A,{children:"Project"}),(0,W.jsxs)(h.A,{value:X,onChange:e=>{Y(e.target.value),ee("all"),se("all")},label:"Project",children:[(0,W.jsx)(j.A,{value:"all",children:"All Projects"}),le.map((e=>(0,W.jsx)(j.A,{value:e._id,children:e.name},e._id)))]})]})}),(0,W.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,W.jsxs)(d.A,{fullWidth:!0,children:[(0,W.jsx)(A.A,{children:"Epic"}),(0,W.jsxs)(h.A,{value:$,onChange:e=>{ee(e.target.value),Y("all"),se("all")},label:"Epic",disabled:"all"===X,children:[(0,W.jsx)(j.A,{value:"all",children:"All Epics"}),re.map((e=>(0,W.jsx)(j.A,{value:e._id,children:e.title},e._id)))]})]})}),(0,W.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,W.jsxs)(d.A,{fullWidth:!0,children:[(0,W.jsx)(A.A,{children:"Sprint"}),(0,W.jsxs)(h.A,{value:te,onChange:e=>{se(e.target.value),Y("all"),ee("all")},label:"Sprint",children:[(0,W.jsx)(j.A,{value:"all",children:"All Sprints"}),ce.filter((e=>"all"===X||e.project===X)).map((e=>(0,W.jsx)(j.A,{value:e._id,children:e.name},e._id)))]})]})}),(0,W.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,W.jsxs)(d.A,{fullWidth:!0,children:[(0,W.jsx)(A.A,{children:"Type"}),(0,W.jsxs)(h.A,{value:J,onChange:e=>Q(e.target.value),label:"Type",children:[(0,W.jsx)(j.A,{value:"all",children:"All Types"}),Object.entries(N).map((e=>{let[t,s]=e;return(0,W.jsx)(j.A,{value:t,children:s.label},t)}))]})]})}),(0,W.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,W.jsxs)(d.A,{fullWidth:!0,children:[(0,W.jsx)(A.A,{children:"Status"}),(0,W.jsxs)(h.A,{value:Z,onChange:e=>q(e.target.value),label:"Status",children:[(0,W.jsx)(j.A,{value:"all",children:"All Statuses"}),(0,W.jsx)(j.A,{value:"todo",children:"To Do"}),(0,W.jsx)(j.A,{value:"in_progress",children:"In Progress"}),(0,W.jsx)(j.A,{value:"done",children:"Done"})]})]})})]}),(0,W.jsx)(p.A,{children:(0,W.jsxs)(u.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,W.jsx)(x.A,{children:(0,W.jsxs)(g.A,{children:[(0,W.jsx)(m.A,{children:"Key"}),(0,W.jsx)(m.A,{children:"Type"}),(0,W.jsx)(m.A,{children:"Title"}),(0,W.jsx)(m.A,{children:"Priority"}),(0,W.jsx)(m.A,{children:"Status"}),(0,W.jsx)(m.A,{children:"Assignee"}),(0,W.jsx)(m.A,{children:"Reporter"}),(0,W.jsx)(m.A,{children:"Sprint"}),(0,W.jsx)(m.A,{children:"Story Points"}),(0,W.jsx)(m.A,{children:"Due Date"}),(0,W.jsx)(m.A,{children:"Created"}),(0,W.jsx)(m.A,{children:"Actions"})]})}),(0,W.jsx)(y.A,{children:pe.slice(10*F,10*(F+1)).map((e=>{var t;return(0,W.jsxs)(g.A,{hover:!0,sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,W.jsx)(m.A,{children:e.key||"N/A"}),(0,W.jsx)(m.A,{children:e.type&&N[e.type]?(0,W.jsx)(v.A,{title:N[e.type].label,children:(0,W.jsx)(w.A,{size:"small",color:N[e.type].color,children:N[e.type].icon})}):(0,W.jsx)(w.A,{size:"small",disabled:!0,children:(0,W.jsx)(k.A,{})})}),(0,W.jsx)(m.A,{children:e.title||"Untitled"}),(0,W.jsx)(m.A,{children:e.priority&&R[e.priority]?(0,W.jsx)(f.A,{size:"small",label:R[e.priority].label,color:R[e.priority].color,icon:(0,W.jsx)("span",{children:R[e.priority].icon})}):(0,W.jsx)(f.A,{size:"small",label:"None",color:"default"})}),(0,W.jsx)(m.A,{children:(0,W.jsx)(f.A,{size:"small",label:e.status||"No Status",color:"done"===(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())?"success":"default"})}),(0,W.jsx)(m.A,{children:e.assignee?(0,W.jsx)(v.A,{title:e.assignee.name||"Unknown",children:(0,W.jsx)(b.A,{sx:{width:24,height:24},alt:e.assignee.name,src:e.assignee.avatar,children:e.assignee.name?e.assignee.name.charAt(0):"?"})}):(0,W.jsx)(v.A,{title:"Unassigned",children:(0,W.jsx)(b.A,{sx:{width:24,height:24},children:"?"})})}),(0,W.jsx)(m.A,{children:e.reporter?(0,W.jsx)(v.A,{title:e.reporter.name||"Unknown",children:(0,W.jsx)(b.A,{sx:{width:24,height:24},alt:e.reporter.name,src:e.reporter.avatar,children:e.reporter.name?e.reporter.name.charAt(0):"?"})}):(0,W.jsx)(v.A,{title:"No Reporter",children:(0,W.jsx)(b.A,{sx:{width:24,height:24},children:"?"})})}),(0,W.jsx)(m.A,{children:e.sprint?(0,W.jsx)(f.A,{size:"small",label:e.sprint.name,color:"info"}):(0,W.jsx)(f.A,{size:"small",label:"Backlog",variant:"outlined"})}),(0,W.jsx)(m.A,{children:e.storyPoints||"-"}),(0,W.jsx)(m.A,{children:e.dueDate?(0,M.GP)(new Date(e.dueDate),"MMM d, yyyy"):"-"}),(0,W.jsx)(m.A,{children:e.createdAt?(0,M.GP)(new Date(e.createdAt),"MMM d, yyyy"):"N/A"}),(0,W.jsx)(m.A,{children:(0,W.jsx)(w.A,{size:"small",onClick:t=>{de(t.currentTarget),he(e)},children:(0,W.jsx)(T.A,{})})})]},e._id)}))})]})}),(0,W.jsx)(P.A,{rowsPerPageOptions:[5,10,25],component:"div",count:pe.length,rowsPerPage:10,page:F,onPageChange:(e,t)=>G(t),onRowsPerPageChange:e=>{setRowsPerPage(parseInt(e.target.value,10)),G(0)}}),(0,W.jsxs)(S.A,{anchorEl:oe,open:Boolean(oe),onClose:()=>{de(null),he(null)},children:[(0,W.jsxs)(j.A,{onClick:()=>{je("/issues/edit/".concat(null===Ae||void 0===Ae?void 0:Ae._id)),de(null),he(null)},children:[(0,W.jsx)(C.A,{children:(0,W.jsx)(z.A,{fontSize:"small"})}),"Edit"]}),(0,W.jsxs)(j.A,{onClick:async()=>{if(window.confirm("Are you sure you want to delete this issue?"))try{await L.A.remove(null===Ae||void 0===Ae?void 0:Ae._id);(async()=>{V(!0);try{let e;e="all"!==X?await L.A.getByProject(X):"all"!==$?await L.A.getByEpic($):"all"!==te?await L.A.getBySprint(te):await L.A.getAll(),s(e.data)}catch(e){console.error("Error fetching data:",e)}finally{V(!1)}})()}catch(e){console.error("Error deleting issue:",e)}de(null),he(null)},children:[(0,W.jsx)(C.A,{children:(0,W.jsx)(E.A,{fontSize:"small"})}),"Delete"]})]})]})}},94160:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(50214);const a={getAll:()=>l.A.get("/issues"),getById:e=>l.A.get("/issues/".concat(e)),getByProject:e=>l.A.get("/issues/project/".concat(e)),getByEpic:e=>l.A.get("/issues/epic/".concat(e)),getBySprint:e=>l.A.get("/issues/sprint/".concat(e)),create:e=>l.A.post("/issues",e),update:(e,t)=>l.A.put("/issues/".concat(e),t),remove:e=>l.A.delete("/issues/".concat(e)),addComment:(e,t)=>l.A.post("/issues/".concat(e,"/comments"),t),addAttachment:(e,t)=>{const s=new FormData;return s.append("attachment",t),l.A.post("/issues/".concat(e,"/attachments"),s,{headers:{"Content-Type":"multipart/form-data"}})},updateTimeTracking:(e,t)=>l.A.post("/issues/".concat(e,"/timetracking"),t)}},11046:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(50214);const a={getAll:()=>l.A.get("/projects"),get:e=>l.A.get("/projects/".concat(e)),create:e=>l.A.post("/projects",e),update:(e,t)=>l.A.put("/projects/".concat(e),t),remove:e=>l.A.delete("/projects/".concat(e)),removeAll:()=>l.A.delete("/projects"),findByTitle:e=>l.A.get("/projects?title=".concat(e)),getProjectProgress:e=>l.A.get("/projects/".concat(e,"/progress")),getBudgetAnalytics:e=>l.A.get("/projects/".concat(e,"/budget-analytics")),getTeamPerformance:e=>l.A.get("/projects/".concat(e,"/team-performance")),searchProjects:e=>l.A.post("/projects/search",e),getProjectMessages:e=>l.A.get("/projects/".concat(e,"/messages")),sendProjectMessage:(e,t)=>l.A.post("/projects/".concat(e,"/messages"),t),exportProjectReport:(e,t)=>l.A.get("/projects/".concat(e,"/export/").concat(t)),scheduleReport:(e,t)=>l.A.post("/projects/".concat(e,"/schedule-report"),t),getProjectAnalytics:e=>l.A.get("/projects/".concat(e,"/analytics")),getProjectById:e=>l.A.get("/projects/id/".concat(e))}},54859:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(50214);const a={getAll:()=>l.A.get("/sprints"),getSprint:e=>l.A.get("/sprints/id/".concat(e)),create:e=>l.A.post("/sprints",e),update:(e,t)=>l.A.put("/sprints/".concat(e),t),deleteSprint:e=>l.A.delete("/sprints/".concat(e)),updateBacklogItems:(e,t)=>(console.log("Sending backlogItemId:",t),l.A.put("/sprints/".concat(e,"/backlogItems"),{backlogItemId:t})),getByProject:e=>(console.log("Fetching sprints for project:",e),l.A.get("/sprints/project/".concat(e)))}},15337:(e,t,s)=>{s.d(t,{A:()=>r});var l=s(66734),a=s(70579);const r=(0,l.A)((0,a.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},58558:(e,t,s)=>{s.d(t,{A:()=>r});var l=s(66734),a=s(70579);const r=(0,l.A)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")}}]);
//# sourceMappingURL=57.613fbd3f.chunk.js.map