"use strict";(self.webpackChunkpfefront=self.webpackChunkpfefront||[]).push([[389,754],{82754:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var i=s(89379),r=s(65043),n=s(26240),o=s(85442),a=s(90035),l=s(26600),c=s(35316),d=s(14194),u=s(68903),p=s(67784),m=s(53193),h=s(79190),A=s(69285),x=s(32143),g=s(7353),j=s(43845),y=s(94496),v=s(81673),f=s(29347),w=s(42518),b=s(81637),C=s(98008),S=s(11046),k=s(94160),D=s(70579);const E=e=>{let{open:t,onClose:s,projectId:E,epic:I}=e;const z=(0,n.A)(),P=(0,o.A)(z.breakpoints.down("sm")),[W,F]=(0,r.useState)(!1),[T,B]=(0,r.useState)(""),[L,_]=(0,r.useState)(""),[O,M]=(0,r.useState)([]),[N,R]=(0,r.useState)([]),[H,q]=(0,r.useState)({name:"",description:"",project:E||"",status:"to do",priority:"medium",startDate:"",dueDate:"",color:"#0052CC",labels:[],watchers:[],issues:[]});(0,r.useEffect)((()=>{(async()=>{try{const[e,t]=await Promise.all([S.A.getAll(),k.A.getAll()]);M(e.data),R(t.data)}catch(e){console.error("Error loading data:",e),B("Failed to load required data")}})()}),[]),(0,r.useEffect)((()=>{q(I?{name:I.name||"",description:I.description||"",project:I.project||E||"",status:I.status||"to do",priority:I.priority||"medium",startDate:I.startDate?new Date(I.startDate).toISOString().split("T")[0]:"",dueDate:I.dueDate?new Date(I.dueDate).toISOString().split("T")[0]:"",color:I.color||"#0052CC",labels:I.labels||[],watchers:I.watchers||[],issues:I.issues||[]}:{name:"",description:"",project:E||"",status:"to do",priority:"medium",startDate:"",dueDate:"",color:"#0052CC",labels:[],watchers:[],issues:[]})}),[I,E]);const U=e=>{const{name:t,value:s}=e.target;if(console.log("Handle change:",t,s),"issues"===t)console.log("Issues selected:",s),q((e=>{const t=(0,i.A)((0,i.A)({},e),{},{issues:Array.isArray(s)?s:[]});return console.log("New epic data after issues change:",t),t}));else{const e="project"===t?s||"":""===s?void 0:s;q((s=>(0,i.A)((0,i.A)({},s),{},{[t]:e})))}},J=()=>{q({name:"",description:"",project:E||"",status:"to do",priority:"medium",startDate:"",dueDate:"",color:"#0052CC",labels:[],watchers:[],issues:[]}),B(""),_(""),s(!1)},V=e=>{switch(e){case"to do":default:return{bg:"#E3F2FD",color:"#1976D2"};case"in progress":return{bg:"#F7DC6F",color:"#FFD700"};case"done":return{bg:"#C6F4D6",color:"#2E865F"}}},K=e=>{switch(e){case"highest":return"#FF0000";case"high":return"#FFA07A";case"medium":default:return"#FFFF00";case"low":return"#32CD32";case"lowest":return"#008000"}};return(0,D.jsxs)(a.A,{open:t,onClose:J,fullScreen:P,maxWidth:"sm",fullWidth:!0,children:[(0,D.jsx)(l.A,{children:I?"Edit Epic":"Create New Epic"}),(0,D.jsxs)("form",{onSubmit:async e=>{var t;e.preventDefault(),F(!0),B(""),_("");const i=localStorage.getItem("userId");if(!i)return B("User not authenticated"),void F(!1);if(null===(t=H.name)||void 0===t||!t.trim())return B("Epic name is required"),void F(!1);try{var r,n,o,a,l,c,d,u;const e={name:H.name.trim(),description:null===(r=H.description)||void 0===r?void 0:r.trim(),status:(null===(n=H.status)||void 0===n?void 0:n.toLowerCase())||"to do",priority:(null===(o=H.priority)||void 0===o?void 0:o.toLowerCase())||"medium",owner:i,project:H.project||E||null,startDate:H.startDate||void 0,dueDate:H.dueDate||void 0,color:H.color||"#0052CC",labels:(null===(a=H.labels)||void 0===a?void 0:a.length)>0?H.labels:void 0,watchers:(null===(l=H.watchers)||void 0===l?void 0:l.length)>0?H.watchers:void 0,issues:(null===(c=H.issues)||void 0===c?void 0:c.length)>0?H.issues:void 0};let t;if(Object.keys(e).forEach((t=>{void 0===e[t]&&delete e[t]})),console.log("Submitting epic data:",e),I?(t=await C.A.update(I._id,e),console.log("Epic updated:",t.data),_("Epic updated successfully!")):(t=await C.A.create(e),console.log("Epic created:",t.data),_("Epic created successfully!")),!I&&null!==(d=t.data)&&void 0!==d&&d._id&&(null===(u=H.issues)||void 0===u?void 0:u.length)>0)try{await Promise.all(H.issues.map((e=>k.A.update(e,{epic:t.data._id})))),console.log("Issues updated successfully")}catch(h){console.error("Error updating issues:",h)}setTimeout((()=>{F(!1),s(!0)}),1e3)}catch(A){var p,m;console.error("Error submitting epic:",A);const e=(null===(p=A.response)||void 0===p||null===(m=p.data)||void 0===m?void 0:m.message)||"Failed to save epic. Please check all required fields.";B(e),F(!1)}},children:[(0,D.jsxs)(c.A,{children:[T&&(0,D.jsx)(d.A,{severity:"error",sx:{mb:2},children:T}),L&&(0,D.jsx)(d.A,{severity:"success",sx:{mb:2},children:L}),(0,D.jsxs)(u.Ay,{container:!0,spacing:2,children:[(0,D.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,D.jsx)(p.A,{name:"key",label:"Epic Key (Optional)",value:H.key,onChange:U,fullWidth:!0,size:P?"small":"medium",helperText:"Unique identifier for project-linked epics"})}),(0,D.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,D.jsx)(p.A,{name:"name",label:"Epic Name",value:H.name,onChange:U,fullWidth:!0,required:!0,size:P?"small":"medium"})}),(0,D.jsx)(u.Ay,{item:!0,xs:12,children:(0,D.jsx)(p.A,{name:"description",label:"Description",value:H.description,onChange:U,fullWidth:!0,multiline:!0,rows:3,size:P?"small":"medium"})}),(0,D.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,D.jsxs)(m.A,{fullWidth:!0,size:P?"small":"medium",children:[(0,D.jsx)(h.A,{children:"Project (Optional)"}),(0,D.jsxs)(A.A,{name:"project",value:H.project||"",onChange:U,label:"Project (Optional)",children:[(0,D.jsx)(x.A,{value:"",children:(0,D.jsx)("em",{children:"None"})}),O.map((e=>(0,D.jsx)(x.A,{value:e._id,children:e.projectName},e._id)))]})]})}),(0,D.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,D.jsxs)(m.A,{fullWidth:!0,size:P?"small":"medium",children:[(0,D.jsx)(h.A,{children:"Status"}),(0,D.jsxs)(A.A,{name:"status",value:H.status,onChange:U,label:"Status",children:[(0,D.jsx)(x.A,{value:"to do",children:"To Do"}),(0,D.jsx)(x.A,{value:"in progress",children:"In Progress"}),(0,D.jsx)(x.A,{value:"done",children:"Done"})]})]})}),(0,D.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,D.jsxs)(m.A,{fullWidth:!0,size:P?"small":"medium",children:[(0,D.jsx)(h.A,{children:"Priority"}),(0,D.jsxs)(A.A,{name:"priority",value:H.priority,onChange:U,label:"Priority",children:[(0,D.jsx)(x.A,{value:"highest",children:"Highest"}),(0,D.jsx)(x.A,{value:"high",children:"High"}),(0,D.jsx)(x.A,{value:"medium",children:"Medium"}),(0,D.jsx)(x.A,{value:"low",children:"Low"}),(0,D.jsx)(x.A,{value:"lowest",children:"Lowest"})]})]})}),(0,D.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,D.jsx)(p.A,{name:"color",label:"Epic Color",type:"color",value:H.color,onChange:U,fullWidth:!0,size:P?"small":"medium",InputLabelProps:{shrink:!0}})}),(0,D.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,D.jsx)(p.A,{name:"startDate",label:"Start Date",type:"date",value:H.startDate,onChange:U,fullWidth:!0,size:P?"small":"medium",InputLabelProps:{shrink:!0}})}),(0,D.jsx)(u.Ay,{item:!0,xs:12,sm:6,children:(0,D.jsx)(p.A,{name:"dueDate",label:"Due Date",type:"date",value:H.dueDate,onChange:U,fullWidth:!0,size:P?"small":"medium",InputLabelProps:{shrink:!0}})}),(0,D.jsx)(u.Ay,{item:!0,xs:12,children:(0,D.jsxs)(m.A,{fullWidth:!0,size:P?"small":"medium",children:[(0,D.jsx)(h.A,{id:"issues-label",children:"Issues"}),(0,D.jsx)(A.A,{labelId:"issues-label",name:"issues",multiple:!0,value:H.issues||[],onChange:U,label:"Issues",renderValue:e=>(0,D.jsx)(g.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{const t=N.find((t=>t._id===e));return(0,D.jsx)(j.A,{label:t?"".concat(t.key," - ").concat(t.title):e,sx:{backgroundColor:t?V(t.status).bg:"#E3F2FD",color:t?V(t.status).color:"#1976D2",fontWeight:500}},e)}))}),MenuProps:{PaperProps:{style:{maxHeight:300}}},children:N&&N.length>0?N.map((e=>(0,D.jsxs)(x.A,{value:e._id,sx:{display:"flex",justifyContent:"space-between",gap:1,py:1},children:[(0,D.jsxs)(g.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,D.jsx)(y.A,{variant:"body2",sx:{fontWeight:600,color:"primary.main",minWidth:"80px"},children:e.key}),(0,D.jsx)(y.A,{variant:"body2",children:e.title})]}),(0,D.jsxs)(g.A,{sx:{display:"flex",gap:1,flexShrink:0},children:[(0,D.jsx)(j.A,{label:e.status,size:"small",sx:{backgroundColor:V(e.status).bg,color:V(e.status).color,height:24}}),(0,D.jsx)(j.A,{label:e.priority,size:"small",sx:{backgroundColor:"white",color:K(e.priority),border:1,borderColor:K(e.priority),height:24}})]})]},e._id))):(0,D.jsx)(x.A,{disabled:!0,children:"No issues available"})}),T&&T.includes("issues")&&(0,D.jsx)(v.A,{error:!0,children:T})]})})]})]}),(0,D.jsxs)(f.A,{sx:{p:z.spacing(2)},children:[(0,D.jsx)(w.A,{onClick:J,size:P?"small":"medium",fullWidth:P,children:"Cancel"}),(0,D.jsx)(w.A,{type:"submit",variant:"contained",size:P?"small":"medium",fullWidth:P,disabled:W,sx:{backgroundColor:"#0052CC","&:hover":{backgroundColor:"#0747A6"}},children:W?(0,D.jsx)(b.A,{size:24}):I?"Update Epic":"Create Epic"})]})]})]})}},1389:(e,t,s)=>{s.r(t),s.d(t,{default:()=>R});var i=s(89379),r=s(65043),n=s(73216),o=s(54420),a=s(26240),l=s(85442),c=s(7353),d=s(94496),u=s(61596),p=s(42518),m=s(30279),h=s(67784),A=s(51787),x=s(17392),g=s(81637),j=s(14194),y=s(68903),v=s(53193),f=s(79190),w=s(69285),b=s(32143),C=s(12110),S=s(43845),k=s(66734),D=s(70579);const E=(0,k.A)((0,D.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),I=(0,k.A)((0,D.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder"),z=(0,k.A)((0,D.jsx)("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply");var P=s(95874),W=s(70141),F=s(79484),T=s(83560),B=s(51387),L=s(98008),_=s(94160),O=s(82754);const M=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;const i=new Date;i.setTime(i.getTime()+24*s*60*60*1e3),document.cookie="".concat(e,"=").concat(JSON.stringify(t),";expires=").concat(i.toUTCString(),";path=/")},N=e=>{const t="".concat(e,"="),s=document.cookie.split(";");for(let r=0;r<s.length;r++){let e=s[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))try{return JSON.parse(e.substring(t.length,e.length))}catch(i){return null}}return null},R=()=>{const e=(0,a.A)(),{projectId:t}=((0,l.A)(e.breakpoints.down("sm")),(0,l.A)(e.breakpoints.down("md")),(0,n.g)()),[s,k]=(0,r.useState)(!1),[R,H]=(0,r.useState)(""),[q,U]=(0,r.useState)([]),[J,V]=(0,r.useState)(!1),[K,Y]=(0,r.useState)(null),[G,Q]=(0,r.useState)({}),[X,Z]=(0,r.useState)(""),[$,ee]=(0,r.useState)("all"),[te,se]=(0,r.useState)("all"),[ie,re]=(0,r.useState)(0),[ne,oe]=(0,r.useState)({}),[ae,le]=(0,r.useState)({}),[ce,de]=(0,r.useState)({}),[ue,pe]=(0,r.useState)({}),[me,he]=(0,r.useState)({}),[Ae,xe]=(0,r.useState)({}),[ge,je]=(0,r.useState)([]),ye={id:localStorage.getItem("userId"),role:localStorage.getItem("role")};(0,r.useEffect)((()=>{(async()=>{try{k(!0),H("");const e=await L.A.getAll();U(e.data)}catch(e){console.error("Error fetching epics:",e),H("Failed to load epics")}finally{k(!1)}})()}),[ie]);const ve=e=>{const t=localStorage.getItem("filteredIssues");if(!t)return[];const{issues:s}=JSON.parse(t);return s.filter((t=>t.epic===e))};(0,r.useEffect)((()=>{(async()=>{try{const e=await _.A.getAll();console.log("All issues loaded:",e.data),je(e.data)}catch(e){console.error("Failed to load issues:",e),H("Failed to load issues")}})()}),[]),(0,r.useEffect)((()=>{const e=localStorage.getItem("token");if(e)try{(0,o.s)(e)}catch(s){console.error("Error decoding token:",s)}const t=N("epicComments");if(t){const e=Object.keys(t).reduce(((e,s)=>(e[s]=t[s].map((e=>({id:e.id||Date.now().toString(),text:e.text,timestamp:e.timestamp,likes:e.likes||0,likedBy:e.likedBy||[],replies:(e.replies||[]).map((e=>({id:e.id||Date.now().toString(),text:e.text,timestamp:e.timestamp,likes:e.likes||0,likedBy:e.likedBy||[],replies:[]}))),username:e.username||"Anonymous"}))),e)),{});oe(e),M("epicComments",e)}}),[]);const fe=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s?de((e=>(0,i.A)((0,i.A)({},e),{},{[s]:t}))):le((s=>(0,i.A)((0,i.A)({},s),{},{[e]:t})))},we=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=t?ce[t]:ae[e];if(null===s||void 0===s||!s.trim()||!ye)return;he((s=>(0,i.A)((0,i.A)({},s),{},{[t||e]:!0})));const r={id:Date.now().toString(),text:s,timestamp:(new Date).toISOString(),likes:0,likedBy:[],replies:[],username:ye.id};try{const s=(0,i.A)({},ne);if(t){const n=be(s[e],t);n&&(n.replies=[...n.replies||[],r]),de((e=>(0,i.A)((0,i.A)({},e),{},{[t]:""})))}else s[e]=[...s[e]||[],r],le((t=>(0,i.A)((0,i.A)({},t),{},{[e]:""})));oe(s),M("epicComments",s),await new Promise((e=>setTimeout(e,500)))}finally{he((s=>(0,i.A)((0,i.A)({},s),{},{[t||e]:!1})))}},be=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;for(const s of e){if(s.id===t)return s;if(s.replies){const e=be(s.replies,t);if(e)return e}}return null},Ce=e=>{var t;return(0,D.jsxs)(c.A,{sx:{mt:3},children:[(0,D.jsx)(d.A,{variant:"subtitle1",gutterBottom:!0,children:"Comments"}),(0,D.jsxs)(c.A,{children:[(ne[e._id]||[]).map((t=>{var s,r,n;return(0,D.jsx)(c.A,{sx:{mb:2},children:(0,D.jsxs)(u.A,{sx:{p:2},children:[(0,D.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,D.jsx)(d.A,{variant:"subtitle2",children:t.username}),(0,D.jsx)(d.A,{variant:"caption",sx:{ml:1},children:new Date(t.timestamp).toLocaleString()})]}),(0,D.jsx)(d.A,{children:t.text}),(0,D.jsxs)(c.A,{sx:{mt:1,display:"flex",gap:1},children:[(0,D.jsxs)(p.A,{size:"small",startIcon:null!==(s=t.likedBy)&&void 0!==s&&s.includes(null===ye||void 0===ye?void 0:ye.id)?(0,D.jsx)(E,{color:"error"}):(0,D.jsx)(I,{}),onClick:()=>(async(e,t)=>{xe((e=>(0,i.A)((0,i.A)({},e),{},{[t]:!0})));try{const s=(0,i.A)({},ne),r=be(s[e],t);if(r){const e=(null===ye||void 0===ye?void 0:ye.id)||"anonymous",t=(r.likedBy||[]).indexOf(e);-1===t?(r.likedBy=[...r.likedBy||[],e],r.likes=(r.likes||0)+1):(r.likedBy.splice(t,1),r.likes=Math.max(0,(r.likes||1)-1)),oe(s),M("epicComments",s),await new Promise((e=>setTimeout(e,300)))}}finally{xe((e=>(0,i.A)((0,i.A)({},e),{},{[t]:!1})))}})(e._id,t.id),children:[t.likes||0," Likes"]}),(0,D.jsx)(p.A,{size:"small",startIcon:(0,D.jsx)(z,{}),onClick:()=>{return e=t.id,void pe((t=>(0,i.A)((0,i.A)({},t),{},{[e]:!t[e]})));var e},children:"Reply"})]}),(0,D.jsx)(m.A,{in:ue[t.id],children:(0,D.jsxs)(c.A,{sx:{ml:3,mt:2},children:[null===(r=t.replies)||void 0===r?void 0:r.map((e=>(0,D.jsxs)(u.A,{sx:{p:2,mb:1,bgcolor:"grey.50"},children:[(0,D.jsx)(d.A,{variant:"subtitle2",children:e.username}),(0,D.jsx)(d.A,{children:e.text})]},e.id))),(0,D.jsx)(h.A,{fullWidth:!0,size:"small",placeholder:"Write a reply...",value:ce[t.id]||"",onChange:s=>fe(e._id,s.target.value,t.id),sx:{mt:1},InputProps:{endAdornment:(0,D.jsx)(A.A,{position:"end",children:(0,D.jsx)(x.A,{size:"small",onClick:()=>we(e._id,t.id),disabled:!(null!==(n=ce[t.id])&&void 0!==n&&n.trim()),children:(0,D.jsx)(P.A,{})})})}})]})})]})},t.id)})),(0,D.jsx)(h.A,{fullWidth:!0,placeholder:"Write a comment...",value:ae[e._id]||"",onChange:t=>fe(e._id,t.target.value),sx:{mt:2},InputProps:{endAdornment:(0,D.jsx)(A.A,{position:"end",children:(0,D.jsx)(x.A,{onClick:()=>we(e._id),disabled:!(null!==(t=ae[e._id])&&void 0!==t&&t.trim()),children:(0,D.jsx)(P.A,{})})})}})]})]})},Se=(0,r.useMemo)((()=>q.filter((e=>{var t;const s=e.name.toLowerCase().includes(X.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(X.toLowerCase())),i="all"===$||e.status===$,r="all"===te||e.priority===te;return s&&i&&r}))),[q,X,$,te]);return(0,D.jsxs)(c.A,{sx:{p:3},children:[s&&(0,D.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",my:4},children:(0,D.jsx)(g.A,{})}),R&&(0,D.jsx)(j.A,{severity:"error",sx:{mb:3},children:R}),!s&&!R&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,D.jsx)(d.A,{variant:"h5",children:"Epics"}),"manager"===ye.role&&(0,D.jsx)(p.A,{variant:"contained",startIcon:(0,D.jsx)(W.A,{}),onClick:()=>V(!0),children:"Create New Epic"})]}),(0,D.jsx)(u.A,{sx:{p:2,mb:3},children:(0,D.jsxs)(y.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,D.jsx)(y.Ay,{item:!0,xs:12,md:4,children:(0,D.jsx)(h.A,{fullWidth:!0,label:"Search Epics",value:X,onChange:e=>Z(e.target.value),InputProps:{startAdornment:(0,D.jsx)(A.A,{position:"start",children:(0,D.jsx)(F.A,{})})},size:"small"})}),(0,D.jsx)(y.Ay,{item:!0,xs:12,md:3,children:(0,D.jsxs)(v.A,{fullWidth:!0,size:"small",children:[(0,D.jsx)(f.A,{children:"Status"}),(0,D.jsxs)(w.A,{value:$,onChange:e=>ee(e.target.value),label:"Status",children:[(0,D.jsx)(b.A,{value:"all",children:"All Statuses"}),(0,D.jsx)(b.A,{value:"todo",children:"To Do"}),(0,D.jsx)(b.A,{value:"inProgress",children:"In Progress"}),(0,D.jsx)(b.A,{value:"done",children:"Done"})]})]})}),(0,D.jsx)(y.Ay,{item:!0,xs:12,md:3,children:(0,D.jsxs)(v.A,{fullWidth:!0,size:"small",children:[(0,D.jsx)(f.A,{children:"Priority"}),(0,D.jsxs)(w.A,{value:te,onChange:e=>se(e.target.value),label:"Priority",children:[(0,D.jsx)(b.A,{value:"all",children:"All Priorities"}),(0,D.jsx)(b.A,{value:"high",children:"High"}),(0,D.jsx)(b.A,{value:"medium",children:"Medium"}),(0,D.jsx)(b.A,{value:"low",children:"Low"})]})]})})]})}),0===Se.length?(0,D.jsxs)(u.A,{sx:{p:4,textAlign:"center",backgroundColor:"grey.50"},children:[(0,D.jsx)(d.A,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"No Epics Found"}),(0,D.jsx)(d.A,{variant:"body2",color:"textSecondary",children:X?"Try adjusting your search or filters":"Start by creating a new epic"})]}):(0,D.jsx)(y.Ay,{container:!0,spacing:2,children:Se.map((e=>(0,D.jsx)(y.Ay,{item:!0,xs:12,children:(0,D.jsxs)(C.A,{sx:{p:2,transition:"all 0.3s","&:hover":{transform:"translateY(-2px)",boxShadow:3}},children:[(0,D.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,D.jsxs)(c.A,{children:[(0,D.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:e.name}),(0,D.jsx)(d.A,{variant:"body2",color:"textSecondary",paragraph:!0,children:e.description})]}),(0,D.jsxs)(c.A,{sx:{display:"flex",gap:1},children:[(0,D.jsx)(S.A,{label:e.status,color:"done"===e.status?"success":"inProgress"===e.status?"warning":"default",size:"small"}),(0,D.jsx)(S.A,{label:e.priority,color:"high"===e.priority?"error":"medium"===e.priority?"warning":"info",size:"small"})]})]}),ve(e._id).length>0&&(0,D.jsxs)(c.A,{children:[(0,D.jsxs)(d.A,{variant:"subtitle2",gutterBottom:!0,children:["Associated Issues (",ve(e._id).length,")"]}),(0,D.jsx)(c.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:ve(e._id).map((e=>(0,D.jsx)(S.A,{label:e.title,size:"small",sx:{mb:1}},e._id)))})]}),Ce(e),"manager"===ye.role&&(0,D.jsxs)(c.A,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mt:2},children:[(0,D.jsx)(p.A,{size:"small",startIcon:(0,D.jsx)(T.A,{}),onClick:()=>(e=>{Y(e),V(!0)})(e),children:"Edit"}),(0,D.jsx)(p.A,{size:"small",startIcon:(0,D.jsx)(B.A,{}),color:"error",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this epic?"))try{k(!0),await L.A.remove(e),re((e=>e+1)),H("Epic deleted successfully")}catch(t){console.error("Error deleting epic:",t),H("Failed to delete epic")}finally{k(!1)}})(e._id),children:"Delete"})]})]})},e._id)))})]}),J&&(0,D.jsx)(O.default,{open:J,onClose:e=>{V(!1),Y(null),e&&re((e=>e+1))},projectId:t,userId:null===ye||void 0===ye?void 0:ye.id})]})}},98008:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(50214);const r=e=>{var t,s,i;const r={name:null===(t=e.name)||void 0===t?void 0:t.trim(),description:null===(s=e.description)||void 0===s?void 0:s.trim(),status:(null===(i=e.status)||void 0===i?void 0:i.toLowerCase())||"to do",priority:(e.priority||"medium").toLowerCase(),startDate:e.startDate||void 0,dueDate:e.dueDate||void 0,owner:e.owner||localStorage.getItem("userId"),watchers:e.watchers||[]};return void 0!==e.project&&(r.project=e.project||null),Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]})),console.log("Original epic data:",e),console.log("Transformed epic data:",r),r},n={getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.A.get("/epics",{params:e})},getById:e=>i.A.get("/epics/".concat(e)),getByProject:e=>i.A.get("/epics/project/".concat(e)),create:e=>{const t=r(e);return i.A.post("/epics",t)},update:(e,t)=>{const s=r(t);return console.log("Transformed update data:",s),i.A.put("/epics/".concat(e),s)},remove:e=>i.A.delete("/epics/".concat(e)),updateProgress:e=>i.A.post("/epics/".concat(e,"/progress")),addWatcher:(e,t)=>i.A.post("/epics/".concat(e,"/watchers"),{userId:t}),removeWatcher:(e,t)=>i.A.delete("/epics/".concat(e,"/watchers"),{data:{userId:t}}),updateEpicStatus:(e,t)=>{const s=r(t);return i.A.put("/epics/".concat(e),s)}}},94160:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(50214);const r={getAll:()=>i.A.get("/issues"),getById:e=>i.A.get("/issues/".concat(e)),getByProject:e=>i.A.get("/issues/project/".concat(e)),getByEpic:e=>i.A.get("/issues/epic/".concat(e)),getBySprint:e=>i.A.get("/issues/sprint/".concat(e)),create:e=>i.A.post("/issues",e),update:(e,t)=>{const s=(e=>{var t,s,i;const r={title:null===(t=e.title)||void 0===t?void 0:t.trim(),description:null===(s=e.description)||void 0===s?void 0:s.trim(),status:(null===(i=e.status)||void 0===i?void 0:i.toLowerCase())||"to do",priority:(e.priority||"medium").toLowerCase(),startDate:e.startDate||void 0,dueDate:e.dueDate||void 0,owner:e.owner||localStorage.getItem("userId"),assignee:e.assignee||null,watchers:e.watchers||[]};return void 0!==e.project&&(r.project=e.project||null),Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]})),console.log("Original issue data:",e),console.log("Transformed issue data:",r),r})(t);return console.log("Transformed update data:",s),i.A.put("/issues/".concat(e),s)},remove:e=>i.A.delete("/issues/".concat(e)),addComment:(e,t)=>i.A.post("/issues/".concat(e,"/comments"),t),addAttachment:(e,t)=>{const s=new FormData;return s.append("attachment",t),i.A.post("/issues/".concat(e,"/attachments"),s,{headers:{"Content-Type":"multipart/form-data"}})},updateTimeTracking:(e,t)=>i.A.post("/issues/".concat(e,"/timetracking"),t)}},11046:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(50214);const r={getAll:()=>i.A.get("/projects"),get:e=>i.A.get("/projects/".concat(e)),create:e=>i.A.post("/projects",e),update:(e,t)=>i.A.put("/projects/".concat(e),t),remove:e=>i.A.delete("/projects/".concat(e)),removeAll:()=>i.A.delete("/projects"),findByTitle:e=>i.A.get("/projects?title=".concat(e)),getProjectProgress:e=>i.A.get("/projects/".concat(e,"/progress")),getBudgetAnalytics:e=>i.A.get("/projects/".concat(e,"/budget-analytics")),getTeamPerformance:e=>i.A.get("/projects/".concat(e,"/team-performance")),searchProjects:e=>i.A.post("/projects/search",e),getProjectMessages:e=>i.A.get("/projects/".concat(e,"/messages")),sendProjectMessage:(e,t)=>i.A.post("/projects/".concat(e,"/messages"),t),exportProjectReport:(e,t)=>i.A.get("/projects/".concat(e,"/export/").concat(t)),scheduleReport:(e,t)=>i.A.post("/projects/".concat(e,"/schedule-report"),t),getProjectAnalytics:e=>i.A.get("/projects/".concat(e,"/analytics")),getProjectById:e=>i.A.get("/projects/id/".concat(e)),findByTeams:e=>i.A.get("/projects/teams/".concat(e))}},95874:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(66734),r=s(70579);const n=(0,i.A)((0,r.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},30279:(e,t,s)=>{s.d(t,{A:()=>D});var i=s(89379),r=s(80045),n=s(65043),o=s(58387),a=s(9998),l=s(93593),c=s(98610),d=s(34535),u=s(26240),p=s(56262),m=s(98206),h=s(14318),A=s(80653),x=s(95849),g=s(92532),j=s(72372);function y(e){return(0,j.Ay)("MuiCollapse",e)}(0,g.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var v=s(70579);const f=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],w=["ownerState"],b=(0,d.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.orientation],"entered"===s.state&&t.entered,"exited"===s.state&&!s.in&&"0px"===s.collapsedSize&&t.hidden]}})((0,p.A)((e=>{let{theme:t}=e;return{height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"exited"===t.state&&!t.in&&"0px"===t.collapsedSize},style:{visibility:"hidden"}}]}}))),C=(0,d.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),S=(0,d.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),k=n.forwardRef((function(e,t){const s=(0,m.b)({props:e,name:"MuiCollapse"}),{addEndListener:d,children:p,className:g,collapsedSize:j="0px",component:k,easing:D,in:E,onEnter:I,onEntered:z,onEntering:P,onExit:W,onExited:F,onExiting:T,orientation:B="vertical",style:L,timeout:_=h.p0.standard,TransitionComponent:O=a.Ay}=s,M=(0,r.A)(s,f),N=(0,i.A)((0,i.A)({},s),{},{orientation:B,collapsedSize:j}),R=(e=>{const{orientation:t,classes:s}=e,i={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return(0,c.A)(i,y,s)})(N),H=(0,u.A)(),q=(0,l.A)(),U=n.useRef(null),J=n.useRef(),V="number"===typeof j?"".concat(j,"px"):j,K="horizontal"===B,Y=K?"width":"height",G=n.useRef(null),Q=(0,x.A)(t,G),X=e=>t=>{if(e){const s=G.current;void 0===t?e(s):e(s,t)}},Z=()=>U.current?U.current[K?"clientWidth":"clientHeight"]:0,$=X(((e,t)=>{U.current&&K&&(U.current.style.position="absolute"),e.style[Y]=V,I&&I(e,t)})),ee=X(((e,t)=>{const s=Z();U.current&&K&&(U.current.style.position="");const{duration:i,easing:r}=(0,A.c)({style:L,timeout:_,easing:D},{mode:"enter"});if("auto"===_){const t=H.transitions.getAutoHeightDuration(s);e.style.transitionDuration="".concat(t,"ms"),J.current=t}else e.style.transitionDuration="string"===typeof i?i:"".concat(i,"ms");e.style[Y]="".concat(s,"px"),e.style.transitionTimingFunction=r,P&&P(e,t)})),te=X(((e,t)=>{e.style[Y]="auto",z&&z(e,t)})),se=X((e=>{e.style[Y]="".concat(Z(),"px"),W&&W(e)})),ie=X(F),re=X((e=>{const t=Z(),{duration:s,easing:i}=(0,A.c)({style:L,timeout:_,easing:D},{mode:"exit"});if("auto"===_){const s=H.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(s,"ms"),J.current=s}else e.style.transitionDuration="string"===typeof s?s:"".concat(s,"ms");e.style[Y]=V,e.style.transitionTimingFunction=i,T&&T(e)}));return(0,v.jsx)(O,(0,i.A)((0,i.A)({in:E,onEnter:$,onEntered:te,onEntering:ee,onExit:se,onExited:ie,onExiting:re,addEndListener:e=>{"auto"===_&&q.start(J.current||0,e),d&&d(G.current,e)},nodeRef:G,timeout:"auto"===_?null:_},M),{},{children:(e,t)=>{let{ownerState:s}=t,n=(0,r.A)(t,w);return(0,v.jsx)(b,(0,i.A)((0,i.A)({as:k,className:(0,o.A)(R.root,g,{entered:R.entered,exited:!E&&"0px"===V&&R.hidden}[e]),style:(0,i.A)({[K?"minWidth":"minHeight"]:V},L),ref:Q,ownerState:(0,i.A)((0,i.A)({},N),{},{state:e})},n),{},{children:(0,v.jsx)(C,{ownerState:(0,i.A)((0,i.A)({},N),{},{state:e}),className:R.wrapper,ref:U,children:(0,v.jsx)(S,{ownerState:(0,i.A)((0,i.A)({},N),{},{state:e}),className:R.wrapperInner,children:p})})}))}}))}));k&&(k.muiSupportAuto=!0);const D=k}}]);
//# sourceMappingURL=389.f6f67e36.chunk.js.map