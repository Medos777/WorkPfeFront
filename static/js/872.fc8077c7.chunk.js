"use strict";(self.webpackChunkpfefront=self.webpackChunkpfefront||[]).push([[872],{54872:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var r=a(89379),s=a(65043),l=a(99012),c=a(71330),n=a(11046),o=a(7353),d=a(94496),i=a(42518),m=a(79650),A=a(61596),j=a(71806),p=a(84882),u=a(28076),h=a(10039),x=a(73460),g=a(43845),b=a(18483),v=a(17392),f=a(90035),y=a(4219),P=a(35316),T=a(15795),_=a(53193),C=a(79190),N=a(69285),w=a(32143),I=a(29347),L=a(70141),M=a(83560),S=a(51387),W=a(70579);const k=()=>{const[e,t]=(0,s.useState)([]),[a,k]=(0,s.useState)({teamName:"",teamLead:"",members:[],projects:[]}),[B,R]=(0,s.useState)([]),[U,E]=(0,s.useState)([]),[z,D]=(0,s.useState)([]),[V,q]=(0,s.useState)(!1),F=async()=>{try{const[e,a,r,s]=await Promise.all([l.A.getAll(),c.A.getUserByRole("manager"),c.A.getUserByRole("developer"),n.A.getAll()]);t(e.data),R(a.data),E(r.data),D(s.data)}catch(e){console.error("Error fetching data:",e)}};(0,s.useEffect)((()=>{F()}),[]);const G=e=>{const{name:t,value:a}=e.target;k((e=>(0,r.A)((0,r.A)({},e),{},{[t]:a})))},H=async e=>{e.preventDefault();try{await l.A.createTeam(a),k({teamName:"",teamLead:"",members:[],projects:[]}),await F(),q(!1)}catch(t){console.error("Error creating team:",t)}},J=()=>{q(!1)};return(0,W.jsxs)(o.A,{p:4,children:[(0,W.jsx)(d.A,{variant:"h4",gutterBottom:!0,children:"Team Management"}),(0,W.jsx)(o.A,{display:"flex",justifyContent:"flex-end",mb:2,children:(0,W.jsx)(i.A,{variant:"contained",color:"primary",startIcon:(0,W.jsx)(L.A,{}),onClick:()=>{q(!0)},children:"Add Team"})}),(0,W.jsx)(m.A,{component:A.A,children:(0,W.jsxs)(j.A,{children:[(0,W.jsx)(p.A,{children:(0,W.jsxs)(u.A,{children:[(0,W.jsx)(h.A,{children:"Team Name"}),(0,W.jsx)(h.A,{children:"Team Lead"}),(0,W.jsx)(h.A,{children:"Members"}),(0,W.jsx)(h.A,{children:"Projects"}),(0,W.jsx)(h.A,{children:"Actions"})]})}),(0,W.jsx)(x.A,{children:e.map((e=>{const t=B.find((t=>t._id===e.teamLead)),a=U.filter((t=>e.members.includes(t._id))),r=z.filter((t=>e.projects.includes(t._id)));return(0,W.jsxs)(u.A,{children:[(0,W.jsx)(h.A,{children:e.teamName}),(0,W.jsx)(h.A,{children:(null===t||void 0===t?void 0:t.username)||"Not assigned"}),(0,W.jsx)(h.A,{children:a.map((e=>(0,W.jsx)(g.A,{label:e.username,size:"small",style:{margin:"2px"}},e._id)))}),(0,W.jsx)(h.A,{children:r.map((e=>(0,W.jsx)(g.A,{label:e.ProjectName,size:"small",style:{margin:"2px"}},e._id)))}),(0,W.jsxs)(h.A,{children:[(0,W.jsx)(b.A,{title:"Edit",children:(0,W.jsx)(v.A,{children:(0,W.jsx)(M.A,{})})}),(0,W.jsx)(b.A,{title:"Delete",children:(0,W.jsx)(v.A,{children:(0,W.jsx)(S.A,{})})})]})]},e._id)}))})]})}),(0,W.jsxs)(f.A,{open:V,onClose:J,maxWidth:"sm",fullWidth:!0,children:[(0,W.jsx)(y.A,{children:"Add New Team"}),(0,W.jsx)(P.A,{children:(0,W.jsxs)("form",{onSubmit:H,children:[(0,W.jsx)(T.A,{label:"Team Name",name:"teamName",value:a.teamName,onChange:G,variant:"outlined",fullWidth:!0,margin:"normal"}),(0,W.jsxs)(_.A,{variant:"outlined",fullWidth:!0,margin:"normal",children:[(0,W.jsx)(C.A,{id:"team-lead-label",children:"Team Lead"}),(0,W.jsxs)(N.A,{labelId:"team-lead-label",name:"teamLead",value:a.teamLead,onChange:G,label:"Team Lead",children:[(0,W.jsx)(w.A,{value:"",children:"Select a team lead"}),B.map((e=>(0,W.jsx)(w.A,{value:e._id,children:e.username},e._id)))]})]}),(0,W.jsxs)(_.A,{variant:"outlined",fullWidth:!0,margin:"normal",children:[(0,W.jsx)(C.A,{id:"members-label",children:"Members"}),(0,W.jsx)(N.A,{labelId:"members-label",name:"members",multiple:!0,value:a.members,onChange:G,label:"Members",renderValue:e=>(0,W.jsx)(o.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var t;return(0,W.jsx)(g.A,{label:null===(t=U.find((t=>t._id===e)))||void 0===t?void 0:t.username},e)}))}),children:U.map((e=>(0,W.jsx)(w.A,{value:e._id,children:e.username},e._id)))})]}),(0,W.jsxs)(_.A,{variant:"outlined",fullWidth:!0,margin:"normal",children:[(0,W.jsx)(C.A,{id:"projects-label",children:"Projects"}),(0,W.jsx)(N.A,{labelId:"projects-label",name:"projects",multiple:!0,value:a.projects,onChange:G,label:"Projects",renderValue:e=>(0,W.jsx)(o.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var t;return(0,W.jsx)(g.A,{label:null===(t=z.find((t=>t._id===e)))||void 0===t?void 0:t.ProjectName},e)}))}),children:z.map((e=>(0,W.jsx)(w.A,{value:e._id,children:e.ProjectName},e._id)))})]})]})}),(0,W.jsxs)(I.A,{children:[(0,W.jsx)(i.A,{onClick:J,color:"primary",children:"Cancel"}),(0,W.jsx)(i.A,{onClick:H,color:"primary",variant:"contained",children:"Create Team"})]})]})]})}},11046:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(50214);const s={getAll:()=>r.A.get("/projects"),get:e=>r.A.get("/projects/".concat(e)),create:e=>r.A.post("/projects",e),update:(e,t)=>r.A.put("/projects/".concat(e),t),remove:e=>r.A.delete("/projects/".concat(e)),removeAll:()=>r.A.delete("/projects"),findByTitle:e=>r.A.get("/projects?title=".concat(e)),getProjectProgress:e=>r.A.get("/projects/".concat(e,"/progress")),getBudgetAnalytics:e=>r.A.get("/projects/".concat(e,"/budget-analytics")),getTeamPerformance:e=>r.A.get("/projects/".concat(e,"/team-performance")),searchProjects:e=>r.A.post("/projects/search",e),getProjectMessages:e=>r.A.get("/projects/".concat(e,"/messages")),sendProjectMessage:(e,t)=>r.A.post("/projects/".concat(e,"/messages"),t),exportProjectReport:(e,t)=>r.A.get("/projects/".concat(e,"/export/").concat(t)),scheduleReport:(e,t)=>r.A.post("/projects/".concat(e,"/schedule-report"),t),getProjectAnalytics:e=>r.A.get("/projects/".concat(e,"/analytics")),getProjectById:e=>r.A.get("/projects/id/".concat(e))}},99012:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(50214);const s={getAll:()=>r.A.get("/teams"),getTeam:e=>r.A.get("/teams/".concat(e)),createTeam:e=>r.A.post("/teams",e),updateTeam:(e,t)=>r.A.put("/teams/".concat(e),t),deleteTeam:e=>r.A.delete("/teams/".concat(e)),addMember:(e,t)=>r.A.post("/teams/".concat(e,"/members"),{userId:t}),removeMember:(e,t)=>r.A.delete("/teams/".concat(e,"/members"),{data:{userId:t}}),assignToProject:(e,t)=>r.A.post("/teams/".concat(e,"/projects"),{projectId:t})}},71330:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(50214);const s={getAll:()=>r.A.get("/users"),create:e=>r.A.post("/users",e),deleteUsers:e=>r.A.delete("/users/".concat(e)),getUser:e=>r.A.get("/users/id/".concat(e)),update:(e,t)=>r.A.put("/users/".concat(e),t),getUserByRole:e=>r.A.get("/users/role/".concat(e))}}}]);
//# sourceMappingURL=872.fc8077c7.chunk.js.map