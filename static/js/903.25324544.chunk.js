"use strict";(self.webpackChunkpfefront=self.webpackChunkpfefront||[]).push([[903],{82754:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var s=r(89379),o=r(65043),a=r(90035),i=r(4219),n=r(35316),l=r(14194),c=r(7353),d=r(15795),p=r(53193),x=r(79190),h=r(69285),u=r(32143),g=r(29347),j=r(42518),A=r(81637),m=r(98008),f=r(11046),v=r(70579);const b=e=>{let{open:t,onClose:r,projectId:b,userId:y}=e;const[D,S]=(0,o.useState)(!1),[w,C]=(0,o.useState)(""),[k,I]=(0,o.useState)(""),[P,B]=(0,o.useState)([]),[z,E]=(0,o.useState)({name:"",description:"",project:b||"",status:"to do",priority:"medium",startDate:"",dueDate:"",labels:[]});(0,o.useEffect)((()=>{W()}),[]),(0,o.useEffect)((()=>{b&&E((e=>(0,s.A)((0,s.A)({},e),{},{project:b})))}),[b]);const W=async()=>{try{const e=await f.A.getAll();B(e.data)}catch(e){console.error("Error loading projects:",e),C("Failed to load projects")}},N=e=>{const{name:t,value:r}=e.target,o="project"===t?r||"":""===r?void 0:r;console.log("Changing ".concat(t," to:"),o),E((e=>(0,s.A)((0,s.A)({},e),{},{[t]:o})))},L=()=>{E({name:"",description:"",project:b||"",status:"to do",priority:"medium",startDate:"",dueDate:"",labels:[]}),C(""),r()};return(0,v.jsxs)(a.A,{open:t,onClose:L,maxWidth:"sm",fullWidth:!0,children:[(0,v.jsx)(i.A,{children:"Create New Epic"}),(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),C(""),I(""),S(!0);try{const e={name:z.name,description:z.description,status:z.status||"to do",priority:z.priority||"medium",owner:y,project:z.project||null};z.startDate&&(e.startDate=z.startDate),z.dueDate&&(e.dueDate=z.dueDate),console.log("Epic data before submission:",z),console.log("Data being sent to server:",e);const t=await m.A.create(e);console.log("Epic created successfully:",t),r(!0),I("Epic created successfully!")}catch(o){var t,s;const e=(null===(t=o.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to create epic";C(e),console.error("Error creating epic:",o)}finally{S(!1)}},children:[(0,v.jsxs)(n.A,{children:[w&&(0,v.jsx)(l.A,{severity:"error",sx:{mb:2},children:w}),k&&(0,v.jsx)(l.A,{severity:"success",sx:{mb:2},children:k}),(0,v.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,v.jsx)(d.A,{name:"name",label:"Epic Name",value:z.name,onChange:N,required:!0,fullWidth:!0}),(0,v.jsx)(d.A,{name:"description",label:"Description",value:z.description,onChange:N,multiline:!0,rows:4,fullWidth:!0}),(0,v.jsxs)(p.A,{fullWidth:!0,children:[(0,v.jsx)(x.A,{children:"Project (Optional)"}),(0,v.jsxs)(h.A,{name:"project",value:z.project||"",onChange:N,label:"Project (Optional)",children:[(0,v.jsx)(u.A,{value:"",children:(0,v.jsx)("em",{children:"None"})}),P.map((e=>(0,v.jsx)(u.A,{value:e._id,children:e.projectName},e._id)))]})]}),(0,v.jsxs)(p.A,{fullWidth:!0,children:[(0,v.jsx)(x.A,{children:"Status"}),(0,v.jsxs)(h.A,{name:"status",value:z.status,onChange:N,label:"Status",children:[(0,v.jsx)(u.A,{value:"to do",children:"To Do"}),(0,v.jsx)(u.A,{value:"in progress",children:"In Progress"}),(0,v.jsx)(u.A,{value:"done",children:"Done"})]})]}),(0,v.jsxs)(p.A,{fullWidth:!0,children:[(0,v.jsx)(x.A,{children:"Priority"}),(0,v.jsxs)(h.A,{name:"priority",value:z.priority,onChange:N,label:"Priority",children:[(0,v.jsx)(u.A,{value:"highest",children:"Highest"}),(0,v.jsx)(u.A,{value:"high",children:"High"}),(0,v.jsx)(u.A,{value:"medium",children:"Medium"}),(0,v.jsx)(u.A,{value:"low",children:"Low"}),(0,v.jsx)(u.A,{value:"lowest",children:"Lowest"})]})]}),(0,v.jsx)(d.A,{name:"startDate",label:"Start Date",type:"date",value:z.startDate,onChange:N,fullWidth:!0,InputLabelProps:{shrink:!0}}),(0,v.jsx)(d.A,{name:"dueDate",label:"Due Date",type:"date",value:z.dueDate,onChange:N,fullWidth:!0,InputLabelProps:{shrink:!0}})]})]}),(0,v.jsxs)(g.A,{children:[(0,v.jsx)(j.A,{onClick:L,children:"Cancel"}),(0,v.jsx)(j.A,{type:"submit",variant:"contained",disabled:D,sx:{backgroundColor:"#0052CC","&:hover":{backgroundColor:"#0747A6"}},children:D?(0,v.jsx)(A.A,{size:24}):"Create Epic"})]})]})]})}},83903:(e,t,r)=>{r.r(t),r.d(t,{default:()=>te});var s=r(89379),o=r(65043),a=r(73216),i=r(12110),n=r(26494),l=r(94496),c=r(7353),d=r(53193),p=r(69285),x=r(32143),h=r(43845),u=r(27600),g=r(42518),j=r(71806),A=r(84882),m=r(28076),f=r(10039),v=r(73460),b=r(79650),y=r(61596),D=r(17392),S=r(22698),w=r(88446),C=r(92314),k=r(55263),I=r(81045),P=r(15078),B=r(84511),z=r(59275),E=r(10529),W=r(15337),N=r(95190),L=r(14149),T=r(80638),_=r(93287),R=r(70141),F=r(19667),H=r(9345),O=r(3632),M=r(11046),G=r(54859),K=r(98008),q=r(28016),V=r(82754),Q=r(42734),U=r(35964),X=r(30335),Y=r(67537),Z=r(70579);const J="epic",$=e=>{let{epic:t,onDrop:r}=e;const[{isDragging:s},o]=(0,Q.i)((()=>({type:J,item:{id:t._id,status:t.status},collect:e=>({isDragging:e.isDragging()})})));return(0,Z.jsx)("div",{ref:o,style:{opacity:s?.5:1,cursor:"move"},children:(0,Z.jsxs)(i.A,{sx:{"&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.15)",transform:"translateY(-2px)",transition:"all 0.2s ease"}},children:[(0,Z.jsxs)(n.A,{children:[(0,Z.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:t.name}),(0,Z.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t.description}),(0,Z.jsxs)(c.A,{sx:{display:"flex",gap:1,alignItems:"center",mb:2},children:[(0,Z.jsx)(d.A,{size:"small",sx:{minWidth:120},children:(0,Z.jsxs)(p.A,{value:t.status||"to do",onChange:e=>handleStatusChange(t._id,e.target.value),sx:{height:32},children:[(0,Z.jsx)(x.A,{value:"to do",children:"To Do"}),(0,Z.jsx)(x.A,{value:"in progress",children:"In Progress"}),(0,Z.jsx)(x.A,{value:"done",children:"Completed"})]})}),(0,Z.jsx)(h.A,{label:t.priority,size:"small",color:"high"===t.priority?"error":"medium"===t.priority?"warning":"info",variant:"outlined"})]}),t.startDate&&(0,Z.jsxs)(l.A,{variant:"caption",color:"text.secondary",display:"block",children:["Start: ",new Date(t.startDate).toLocaleDateString()]}),t.dueDate&&(0,Z.jsxs)(l.A,{variant:"caption",color:"text.secondary",display:"block",children:["Due: ",new Date(t.dueDate).toLocaleDateString()]})]}),(0,Z.jsx)(u.A,{children:(0,Z.jsx)(g.A,{size:"small",onClick:()=>handleItemClick(t,"epic"),children:"View Details"})})]})})},ee=e=>{let{status:t,title:r,epics:s,onDrop:o}=e;const[{isOver:a},i]=(0,U.H)((()=>({accept:J,drop:e=>o(e.id,t),collect:e=>({isOver:e.isOver()})})));return(0,Z.jsxs)(c.A,{ref:i,sx:{width:300,minWidth:300,bgcolor:a?"action.hover":"background.paper",borderRadius:1,p:2,display:"flex",flexDirection:"column",transition:"background-color 0.2s ease"},children:[(0,Z.jsxs)(l.A,{variant:"h6",sx:{mb:2},children:[r," (",(null===s||void 0===s?void 0:s.length)||0,")"]}),(0,Z.jsx)(c.A,{sx:{minHeight:100,display:"flex",flexDirection:"column",gap:2},children:null===s||void 0===s?void 0:s.map(((e,t)=>(0,Z.jsx)($,{epic:e,index:t},e._id)))})]})},te=()=>{const e=(0,a.Zp)(),{id:t}=(0,a.g)(),[r,i]=(0,o.useState)(null),[n,u]=(0,o.useState)([]),[Q,U]=(0,o.useState)([]),[J,$]=(0,o.useState)([]),[te,re]=(0,o.useState)(!0),[se,oe]=(0,o.useState)(null),[ae,ie]=(0,o.useState)(null),[ne,le]=(0,o.useState)(null),[ce,de]=(0,o.useState)(!1),[pe,xe]=(0,o.useState)(localStorage.getItem("projectType")),[he,ue]=(0,o.useState)(""),[ge,je]=(0,o.useState)(!1),[Ae,me]=(0,o.useState)("table"),[fe,ve]=(0,o.useState)({"to do":[],"in progress":[],done:[]}),[be,ye]=(0,o.useState)(null),[De,Se]=(0,o.useState)(null),we="to do",Ce="in progress",ke="done";(0,o.useEffect)((()=>{t&&(async()=>{re(!0);try{const e=await M.A.getProjectById(t);i(e.data),ue(e.data.key);const r=await K.A.getByProject(t);console.log("Epic data from server:",r.data),U(r.data);const s=await G.A.getByProject(t);u(s.data);const o=await q.A.getByProject(t);$(o.data)}catch(e){console.error("Error fetching project data:",e),oe(e.message)}finally{re(!1)}})()}),[t]),(0,o.useEffect)((()=>{const e=()=>{const e=localStorage.getItem("projectType");xe(e)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),(0,o.useEffect)((()=>{const e=requestAnimationFrame((()=>{}));return()=>{cancelAnimationFrame(e)}}),[]),(0,o.useEffect)((()=>{if(Q.length>0){console.log("Current epics:",Q);const e={[we]:[],[Ce]:[],[ke]:[]};Q.forEach((t=>{const r=t.status||we;e[r]?e[r].push(t):e[we].push(t)})),console.log("Grouped epics:",e),ve(e)}}),[Q]);const Ie=async(e,r)=>{console.log("Changing status:",{epicId:e,newStatus:r});const s=Q.find((t=>t._id===e));if(s)try{const o={name:s.name,description:s.description,priority:s.priority,startDate:s.startDate,dueDate:s.dueDate,project:t,status:r.toLowerCase()};console.log("Sending update for epic:",o),await K.A.update(e,o);const a=await K.A.getByProject(t);U(a.data)}catch(se){var o;console.error("Error updating epic status:",(null===(o=se.response)||void 0===o?void 0:o.data)||se.message),oe("Failed to update epic status. Please try again.")}else console.error("Epic not found:",e)},Pe=(e,t)=>{ie(e),le(t),de(!1)},Be=e=>{le(e),ie(null),de(!0)},ze=async(e,r)=>{try{const o=Q.find((t=>t._id===e));if(!o)return void console.error("Epic not found:",e);const a=(0,s.A)({},fe),i=o.status;a[i]=a[i].filter((t=>t._id!==e));const n=(0,s.A)((0,s.A)({},o),{},{status:r});a[r]=[...a[r]||[],n],ve(a);const l=(0,s.A)((0,s.A)({},o),{},{status:r,project:t});delete l._id,console.log("Updating epic status via drag:",l),await K.A.update(e,l);const c=await K.A.getByProject(t);U(c.data)}catch(se){var o;console.error("Error updating epic status:",(null===(o=se.response)||void 0===o?void 0:o.data)||se.message),oe("Failed to update epic status. Please try again.");const r=await K.A.getByProject(t);U(r.data)}},Ee=()=>ae?(0,Z.jsx)(c.A,{sx:{maxWidth:800,margin:"0 auto"},children:(0,Z.jsxs)(c.A,{sx:{backgroundColor:"#fff",borderRadius:2,mb:3},children:[(0,Z.jsxs)(c.A,{sx:{mb:3},children:[(0,Z.jsx)(l.A,{variant:"h5",gutterBottom:!0,sx:{color:"#1976d2",fontWeight:500},children:"epic"===ne?"Epic Details":"backlog"===ne?"Backlog Details":"Sprint Details"}),(0,Z.jsx)(c.A,{sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontSize:"0.75rem",fontWeight:500,padding:"2px 8px",borderRadius:"4px"},children:ae.status||"to do"})]}),(0,Z.jsxs)(c.A,{sx:{mb:4},children:[(0,Z.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#546e7a",fontWeight:500,fontSize:"0.875rem"},children:"Name"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238"},children:ae.name})]}),(0,Z.jsxs)(c.A,{sx:{mb:4},children:[(0,Z.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#546e7a",fontWeight:500,fontSize:"0.875rem"},children:"Description"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238"},children:ae.description||"No description available"})]}),"sprint"===ne&&(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(l.A,{variant:"subtitle1",gutterBottom:!0,sx:{color:"#546e7a",fontWeight:500,fontSize:"0.875rem"},children:"Sprint Details"}),(0,Z.jsxs)(c.A,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:3,mt:2},children:[(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(l.A,{variant:"caption",sx:{color:"#546e7a"},children:"Start Date"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238",fontWeight:500},children:new Date(ae.startDate).toLocaleDateString()})]}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(l.A,{variant:"caption",sx:{color:"#546e7a"},children:"End Date"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238",fontWeight:500},children:new Date(ae.endDate).toLocaleDateString()})]})]}),ae.goal&&(0,Z.jsxs)(c.A,{sx:{mt:3},children:[(0,Z.jsx)(l.A,{variant:"caption",sx:{color:"#546e7a"},children:"Goal"}),(0,Z.jsx)(l.A,{variant:"body1",sx:{color:"#263238",mt:.5},children:ae.goal})]})]})]})}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(c.A,{sx:{mb:3,display:"flex",alignItems:"center",gap:2},children:[(0,Z.jsx)(l.A,{variant:"h5",children:r.projectName}),(0,Z.jsx)(c.A,{sx:{backgroundColor:"#e3f2fd",color:"#1976d2",fontSize:"0.75rem",fontWeight:500,padding:"2px 8px",borderRadius:"4px"},children:"Planned"})]}),(0,Z.jsxs)(c.A,{sx:{p:3,mb:3},children:[(0,Z.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Description"}),(0,Z.jsx)(l.A,{variant:"body1",paragraph:!0,children:r.description||"No description available"})]}),(0,Z.jsxs)(c.A,{sx:{p:3},children:[(0,Z.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Project Details"}),(0,Z.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,Z.jsxs)(l.A,{variant:"body1",children:[(0,Z.jsx)("strong",{children:"Project Type:"})," ",r.projectType]}),(0,Z.jsxs)(l.A,{variant:"body1",children:[(0,Z.jsx)("strong",{children:"Start Date:"})," ",new Date(r.startDate).toLocaleDateString()]}),(0,Z.jsxs)(l.A,{variant:"body1",children:[(0,Z.jsx)("strong",{children:"End Date:"})," ",new Date(r.endDate).toLocaleDateString()]})]})]})]}),We=(0,Z.jsx)(C.A,{position:"fixed",sx:{zIndex:1100,backgroundColor:"#1976d2",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},children:(0,Z.jsxs)(k.A,{sx:{minHeight:"64px !important"},children:[(0,Z.jsx)(D.A,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:(0,Z.jsx)(_.A,{})}),(0,Z.jsx)(c.A,{sx:{p:2},children:(0,Z.jsxs)(S.A,{separator:(0,Z.jsx)(T.A,{fontSize:"small"}),children:[(0,Z.jsxs)(w.A,{component:"button",variant:"body1",onClick:()=>e("/dashboard"),sx:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)(z.A,{sx:{mr:.5},fontSize:"inherit"}),"Dashboard"]}),(0,Z.jsxs)(w.A,{component:"button",variant:"body1",onClick:()=>e("/projects"),sx:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)(E.A,{sx:{mr:.5},fontSize:"inherit"}),"Projects"]}),(0,Z.jsx)(l.A,{color:"text.primary",sx:{display:"flex",alignItems:"center"},children:(null===r||void 0===r?void 0:r.projectName)||"Project Details"})]})}),(0,Z.jsx)(D.A,{color:"inherit",children:(0,Z.jsx)(L.A,{})})]})}),Ne=()=>{je(!1)};return te?(0,Z.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}):se?(0,Z.jsx)(c.A,{sx:{color:"error.main",p:2},children:se}):r?(0,Z.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",backgroundColor:"#f5f5f5"},children:[We,(0,Z.jsxs)(c.A,{sx:{display:"flex",flex:1},children:[(0,Z.jsxs)(c.A,{sx:{width:"240px",backgroundColor:"#fff",borderRight:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",flexDirection:"column",height:"100vh",position:"fixed",left:0,top:64,color:"#1976d2",zIndex:100},children:[(0,Z.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",px:3,py:3,borderBottom:"1px solid rgba(0, 0, 0, 0.12)",mb:1},children:[(0,Z.jsx)(I.A,{sx:{bgcolor:"#1976d2",width:40,height:40,fontSize:"1.2rem",fontWeight:600,mr:2},children:null===he||void 0===he?void 0:he.charAt(0)}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(l.A,{variant:"subtitle1",sx:{color:"#1976d2",fontWeight:600,fontSize:"1rem",lineHeight:1.2},children:he}),(0,Z.jsx)(l.A,{variant:"caption",sx:{color:"rgba(25, 118, 210, 0.7)",fontSize:"0.75rem"},children:(null===r||void 0===r?void 0:r.name)||"Project"})]})]}),(0,Z.jsxs)(c.A,{sx:{flex:1,overflow:"auto"},children:[(0,Z.jsx)(c.A,{sx:{mt:2},children:(0,Z.jsxs)(l.A,{variant:"subtitle2",onClick:()=>Be("epic"),sx:{px:3,py:2.5,backgroundColor:"epic"===ne&&ce?"rgba(25, 118, 210, 0.08)":"transparent",color:"epic"===ne&&ce?"#1976d2":"rgba(25, 118, 210, 0.7)",fontWeight:500,fontSize:"0.875rem",letterSpacing:"0.3px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:2,"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)",color:"#1976d2"}},children:[(0,Z.jsx)(W.A,{fontSize:"small",sx:{color:"inherit",fontSize:"1.25rem"}}),"EPICS"]})}),"Kanban"!==pe&&(0,Z.jsx)(c.A,{children:(0,Z.jsxs)(l.A,{variant:"subtitle2",onClick:()=>Be("backlog"),sx:{px:3,py:2.5,backgroundColor:"backlog"===ne&&ce?"rgba(25, 118, 210, 0.08)":"transparent",color:"backlog"===ne&&ce?"#1976d2":"rgba(25, 118, 210, 0.7)",fontWeight:500,fontSize:"0.875rem",letterSpacing:"0.3px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:2,"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)",color:"#1976d2"}},children:[(0,Z.jsx)(E.A,{fontSize:"small",sx:{color:"inherit",fontSize:"1.25rem"}}),"BACKLOGS"]})}),"Kanban"!==pe&&(0,Z.jsx)(c.A,{children:(0,Z.jsxs)(l.A,{variant:"subtitle2",onClick:()=>Be("sprint"),sx:{px:3,py:2.5,backgroundColor:"sprint"===ne&&ce?"rgba(25, 118, 210, 0.08)":"transparent",color:"sprint"===ne&&ce?"#1976d2":"rgba(25, 118, 210, 0.7)",fontWeight:500,fontSize:"0.875rem",letterSpacing:"0.3px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:2,"&:hover":{backgroundColor:"rgba(25, 118, 210, 0.08)",color:"#1976d2"}},children:[(0,Z.jsx)(N.A,{fontSize:"small",sx:{color:"inherit",fontSize:"1.25rem"}}),"SPRINTS"]})})]})]}),(0,Z.jsx)(c.A,{component:"main",sx:{flex:1,ml:"240px",display:"flex",flexDirection:"column",minHeight:"100vh",position:"relative"},children:(0,Z.jsx)(c.A,{sx:{position:"fixed",top:128,left:"240px",right:0,bottom:0,backgroundColor:"#fff",borderTop:"1px solid rgba(0, 0, 0, 0.12)",borderLeft:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",flexDirection:"column",zIndex:1},children:(0,Z.jsxs)(c.A,{sx:{flex:1,overflow:"auto",padding:"24px",boxShadow:"inset 0 4px 8px rgba(0,0,0,0.05)"},children:["epic"===ne&&!ae&&(0,Z.jsxs)(c.A,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Z.jsxs)(P.A,{value:Ae,exclusive:!0,onChange:(e,t)=>{null!==t&&me(t)},size:"small",sx:{"& .MuiToggleButton-root.Mui-selected":{backgroundColor:"#1976d2",color:"white","&:hover":{backgroundColor:"#1565c0"}}},children:[(0,Z.jsx)(B.A,{value:"table","aria-label":"table view",children:(0,Z.jsx)(F.A,{})}),(0,Z.jsx)(B.A,{value:"card","aria-label":"card view",children:(0,Z.jsx)(H.A,{})})]}),(0,Z.jsx)(g.A,{variant:"contained",color:"primary",onClick:()=>{je(!0)},startIcon:(0,Z.jsx)(R.A,{}),sx:{borderRadius:"8px",textTransform:"none",fontWeight:600},children:"Create Epic"})]}),"epic"===ne?ae?Ee():"table"===Ae?(0,Z.jsx)(b.A,{component:y.A,sx:{mt:2},children:(0,Z.jsxs)(j.A,{children:[(0,Z.jsx)(A.A,{children:(0,Z.jsxs)(m.A,{children:[(0,Z.jsx)(f.A,{children:"Name"}),(0,Z.jsx)(f.A,{children:"Description"}),(0,Z.jsx)(f.A,{children:"Status"}),(0,Z.jsx)(f.A,{children:"Priority"}),(0,Z.jsx)(f.A,{children:"Start Date"}),(0,Z.jsx)(f.A,{children:"Due Date"}),(0,Z.jsx)(f.A,{children:"Actions"})]})}),(0,Z.jsx)(v.A,{children:Q.map((e=>(0,Z.jsxs)(m.A,{children:[(0,Z.jsx)(f.A,{children:e.name}),(0,Z.jsx)(f.A,{children:e.description}),(0,Z.jsx)(f.A,{children:(0,Z.jsx)(d.A,{size:"small",sx:{minWidth:120},children:(0,Z.jsxs)(p.A,{value:e.status||we,onChange:t=>Ie(e._id,t.target.value),sx:{height:32},children:[(0,Z.jsx)(x.A,{value:we,children:"To Do"}),(0,Z.jsx)(x.A,{value:Ce,children:"In Progress"}),(0,Z.jsx)(x.A,{value:ke,children:"Completed"})]})})}),(0,Z.jsx)(f.A,{children:(0,Z.jsx)(h.A,{label:e.priority,size:"small",color:"high"===e.priority?"error":"medium"===e.priority?"warning":"info",variant:"outlined"})}),(0,Z.jsx)(f.A,{children:e.startDate?new Date(e.startDate).toLocaleDateString():"-"}),(0,Z.jsx)(f.A,{children:e.dueDate?new Date(e.dueDate).toLocaleDateString():"-"}),(0,Z.jsx)(f.A,{children:(0,Z.jsx)(D.A,{size:"small",onClick:()=>Pe(e,"epic"),title:"View Details",children:(0,Z.jsx)(O.A,{fontSize:"small"})})})]},e._id)))})]})}):(()=>{const e=[{id:we,title:"To Do"},{id:Ce,title:"In Progress"},{id:ke,title:"Completed"}];return(0,Z.jsx)(X.Q,{backend:Y.t2,children:(0,Z.jsx)(c.A,{sx:{display:"flex",gap:2,p:2,overflowX:"auto"},children:e.map((e=>(0,Z.jsx)(ee,{status:e.id,title:e.title,epics:fe[e.id],onDrop:ze},e.id)))})})})():ce?(()=>{let e=[],t=[];switch(ne){case"epic":e=Q,t=[{field:"name",headerName:"Name",flex:1},{field:"status",headerName:"Status",width:120},{field:"description",headerName:"Description",flex:1.5}];break;case"backlog":e=J,t=[{field:"name",headerName:"Name",flex:1},{field:"status",headerName:"Status",width:120},{field:"items",headerName:"Items",width:100,renderCell:e=>e.value?e.value.length:0}];break;case"sprint":e=n,t=[{field:"name",headerName:"Name",flex:1},{field:"status",headerName:"Status",width:120},{field:"startDate",headerName:"Start Date",width:120,renderCell:e=>new Date(e.value).toLocaleDateString()},{field:"endDate",headerName:"End Date",width:120,renderCell:e=>new Date(e.value).toLocaleDateString()}];break;default:return null}return(0,Z.jsx)(c.A,{sx:{maxWidth:800,margin:"0 auto"},children:(0,Z.jsxs)(j.A,{children:[(0,Z.jsx)(A.A,{children:(0,Z.jsx)(m.A,{children:t.map((e=>(0,Z.jsx)(f.A,{sx:{fontWeight:600,backgroundColor:"#f5f5f5",color:"#546e7a"},width:e.width,children:e.headerName},e.field)))})}),(0,Z.jsx)(v.A,{children:e.map((e=>(0,Z.jsx)(m.A,{hover:!0,onClick:()=>Pe(e,ne),sx:{cursor:"pointer","&:hover":{backgroundColor:"#f5f5f5"}},children:t.map((t=>(0,Z.jsx)(f.A,{children:t.renderCell?t.renderCell({value:e[t.field]}):e[t.field]||"-"},t.field)))},e._id)))})]})})})():Ee(),(0,Z.jsx)(V.default,{open:ge,onClose:Ne,projectId:t,onEpicAdded:async()=>{try{const e=await K.A.getByProject(t);U(e.data),Ne()}catch(se){console.error("Error fetching epics:",se)}}})]})})})]})]}):(0,Z.jsx)(c.A,{sx:{p:2},children:"Project not found"})}},28016:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(50214);const o={getAll:()=>s.A.get("/Backlogs"),getById:e=>s.A.get("/Backlogs/id/".concat(e)),getByProject:e=>s.A.get("/Backlogs/projectId/".concat(e)),create:e=>s.A.post("/Backlogs",e),update:(e,t)=>s.A.put("/Backlogs/".concat(e),t),remove:e=>s.A.delete("/Backlogs/".concat(e))}},98008:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(50214);const o=e=>{var t,r,s;const o={name:null===(t=e.name)||void 0===t?void 0:t.trim(),description:null===(r=e.description)||void 0===r?void 0:r.trim(),status:(null===(s=e.status)||void 0===s?void 0:s.toLowerCase())||"to do",priority:(e.priority||"medium").toLowerCase(),startDate:e.startDate||void 0,dueDate:e.dueDate||void 0,owner:e.owner||localStorage.getItem("userId"),watchers:e.watchers||[]};return void 0!==e.project&&(o.project=e.project||null),Object.keys(o).forEach((e=>{void 0===o[e]&&delete o[e]})),console.log("Original epic data:",e),console.log("Transformed epic data:",o),o},a={getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.A.get("/epics",{params:e})},getById:e=>s.A.get("/epics/".concat(e)),getByProject:e=>s.A.get("/epics/project/".concat(e)),create:e=>{const t=o(e);return s.A.post("/epics",t)},update:(e,t)=>{const r=o(t);return console.log("Transformed update data:",r),s.A.put("/epics/".concat(e),r)},remove:e=>s.A.delete("/epics/".concat(e)),updateProgress:e=>s.A.post("/epics/".concat(e,"/progress")),addWatcher:(e,t)=>s.A.post("/epics/".concat(e,"/watchers"),{userId:t}),removeWatcher:(e,t)=>s.A.delete("/epics/".concat(e,"/watchers"),{data:{userId:t}})}},11046:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(50214);const o={getAll:()=>s.A.get("/projects"),get:e=>s.A.get("/projects/".concat(e)),create:e=>s.A.post("/projects",e),update:(e,t)=>s.A.put("/projects/".concat(e),t),remove:e=>s.A.delete("/projects/".concat(e)),removeAll:()=>s.A.delete("/projects"),findByTitle:e=>s.A.get("/projects?title=".concat(e)),getProjectProgress:e=>s.A.get("/projects/".concat(e,"/progress")),getBudgetAnalytics:e=>s.A.get("/projects/".concat(e,"/budget-analytics")),getTeamPerformance:e=>s.A.get("/projects/".concat(e,"/team-performance")),searchProjects:e=>s.A.post("/projects/search",e),getProjectMessages:e=>s.A.get("/projects/".concat(e,"/messages")),sendProjectMessage:(e,t)=>s.A.post("/projects/".concat(e,"/messages"),t),exportProjectReport:(e,t)=>s.A.get("/projects/".concat(e,"/export/").concat(t)),scheduleReport:(e,t)=>s.A.post("/projects/".concat(e,"/schedule-report"),t),getProjectAnalytics:e=>s.A.get("/projects/".concat(e,"/analytics")),getProjectById:e=>s.A.get("/projects/id/".concat(e))}},54859:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(50214);const o={getAll:()=>s.A.get("/sprints"),getSprint:e=>s.A.get("/sprints/id/".concat(e)),create:e=>s.A.post("/sprints",e),update:(e,t)=>s.A.put("/sprints/".concat(e),t),deleteSprint:e=>s.A.delete("/sprints/".concat(e)),updateBacklogItems:(e,t)=>(console.log("Sending backlogItemId:",t),s.A.put("/sprints/".concat(e,"/backlogItems"),{backlogItemId:t})),getByProject:e=>(console.log("Fetching sprints for project:",e),s.A.get("/sprints/project/".concat(e)))}}}]);
//# sourceMappingURL=903.25324544.chunk.js.map