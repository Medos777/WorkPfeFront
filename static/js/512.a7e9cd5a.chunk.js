"use strict";(self.webpackChunkpfefront=self.webpackChunkpfefront||[]).push([[512],{14512:(e,t,o)=>{o.r(t),o.d(t,{default:()=>M});var r=o(89379),a=o(65043),l=o(90035),n=o(4219),s=o(35316),c=o(14194),i=o(15795),d=o(53193),A=o(79190),p=o(69285),g=o(32143),u=o(7353),m=o(94496),h=o(42518),j=o(43845),v=o(35721),x=o(71322),f=o(17392),y=o(48734),C=o(29347),k=o(70141),S=o(51387),B=o(28016),I=o(11046),P=o(40293),w=o(70579);const M=e=>{let{open:t,onClose:o,onBacklogCreated:M}=e;const[b,W]=(0,a.useState)([]),[z,T]=(0,a.useState)([]),[L,F]=(0,a.useState)([]),[R,N]=(0,a.useState)(!0),[E,O]=(0,a.useState)(null),[_,H]=(0,a.useState)({name:"",project:"",items:[]}),[V,D]=(0,a.useState)(!1),[q,Z]=(0,a.useState)({title:"",description:"",type:"story",status:"todo",project:""});(0,a.useEffect)((()=>{(async()=>{try{N(!0);const[e,t]=await Promise.all([I.A.getAll(),P.A.getAll()]);W(e.data||[]),T(t.data||[]),O(null)}catch(e){O("Failed to fetch data")}finally{N(!1)}})()}),[]);return(0,w.jsxs)(l.A,{open:t,onClose:o,maxWidth:"sm",fullWidth:!0,children:[(0,w.jsx)(n.A,{children:"Add New Backlog"}),(0,w.jsxs)(s.A,{children:[E&&(0,w.jsx)(c.A,{severity:"error",children:E}),(0,w.jsx)(i.A,{label:"Backlog Name",fullWidth:!0,margin:"normal",value:_.name,onChange:e=>H((0,r.A)((0,r.A)({},_),{},{name:e.target.value}))}),(0,w.jsxs)(d.A,{fullWidth:!0,margin:"normal",children:[(0,w.jsx)(A.A,{children:"Project"}),(0,w.jsxs)(p.A,{value:_.project,onChange:e=>(e=>{H((t=>(0,r.A)((0,r.A)({},t),{},{project:e,items:[]}))),Z((t=>(0,r.A)((0,r.A)({},t),{},{project:e})));const t=z.filter((t=>t.project===e));F(t)})(e.target.value),displayEmpty:!0,children:[(0,w.jsx)(g.A,{value:"",children:(0,w.jsx)("em",{children:"Select a Project"})}),b.map((e=>(0,w.jsx)(g.A,{value:e._id,children:e.projectName},e._id)))]})]}),(0,w.jsxs)(u.A,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{mt:2},children:[(0,w.jsx)(m.A,{variant:"h6",children:"Backlog Items"}),(0,w.jsx)(h.A,{variant:"outlined",startIcon:(0,w.jsx)(k.A,{}),onClick:()=>D(!0),children:"Add Backlog Item"})]}),(0,w.jsxs)(d.A,{fullWidth:!0,margin:"normal",children:[(0,w.jsx)(A.A,{children:"Select Items"}),(0,w.jsx)(p.A,{multiple:!0,value:_.items,onChange:e=>H((0,r.A)((0,r.A)({},_),{},{items:e.target.value})),renderValue:e=>(0,w.jsx)(u.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var t;return(0,w.jsx)(j.A,{label:(null===(t=L.find((t=>t._id===e)))||void 0===t?void 0:t.title)||""},e)}))}),children:L.map((e=>(0,w.jsx)(g.A,{value:e._id,children:e.title},e._id)))})]}),(0,w.jsx)(v.A,{dense:!0,children:_.items.map((e=>{var t;return(0,w.jsx)(x.Ay,{secondaryAction:(0,w.jsx)(f.A,{edge:"end",onClick:()=>(e=>{H((t=>(0,r.A)((0,r.A)({},t),{},{items:t.items.filter((t=>t!==e))})))})(e),children:(0,w.jsx)(S.A,{})}),children:(0,w.jsx)(y.A,{primary:(null===(t=L.find((t=>t._id===e)))||void 0===t?void 0:t.title)||""})},e)}))})]}),(0,w.jsxs)(C.A,{children:[(0,w.jsx)(h.A,{onClick:o,children:"Cancel"}),(0,w.jsx)(h.A,{variant:"contained",onClick:async()=>{if(_.name&&_.project)try{await B.A.create(_),H({name:"",project:"",items:[]}),M(),o()}catch(e){O("Failed to create backlog")}else O("Name and Project are required fields")},children:"Create"})]}),(0,w.jsxs)(l.A,{open:V,onClose:()=>D(!1),maxWidth:"sm",fullWidth:!0,children:[(0,w.jsx)(n.A,{children:"Add Backlog Item"}),(0,w.jsxs)(s.A,{children:[(0,w.jsx)(i.A,{label:"Title",fullWidth:!0,margin:"normal",value:q.title,onChange:e=>Z((0,r.A)((0,r.A)({},q),{},{title:e.target.value}))}),(0,w.jsx)(i.A,{label:"Description",fullWidth:!0,margin:"normal",value:q.description,onChange:e=>Z((0,r.A)((0,r.A)({},q),{},{description:e.target.value}))}),(0,w.jsxs)(d.A,{fullWidth:!0,margin:"normal",children:[(0,w.jsx)(A.A,{children:"Type"}),(0,w.jsxs)(p.A,{value:q.type,onChange:e=>Z((0,r.A)((0,r.A)({},q),{},{type:e.target.value})),children:[(0,w.jsx)(g.A,{value:"story",children:"Story"}),(0,w.jsx)(g.A,{value:"task",children:"Task"}),(0,w.jsx)(g.A,{value:"bug",children:"Bug"})]})]}),(0,w.jsxs)(d.A,{fullWidth:!0,margin:"normal",children:[(0,w.jsx)(A.A,{children:"Status"}),(0,w.jsxs)(p.A,{value:q.status,onChange:e=>Z((0,r.A)((0,r.A)({},q),{},{status:e.target.value})),children:[(0,w.jsx)(g.A,{value:"todo",children:"To Do"}),(0,w.jsx)(g.A,{value:"in-progress",children:"In Progress"}),(0,w.jsx)(g.A,{value:"done",children:"Done"})]})]})]}),(0,w.jsxs)(C.A,{children:[(0,w.jsx)(h.A,{onClick:()=>D(!1),children:"Cancel"}),(0,w.jsx)(h.A,{variant:"contained",onClick:async()=>{if(q.title&&q.project)try{const e=await P.A.create(q);T((t=>[...t,e.data])),F((t=>[...t,e.data])),H((t=>(0,r.A)((0,r.A)({},t),{},{items:[...t.items,e.data._id]}))),Z({title:"",description:"",type:"story",status:"todo",project:_.project}),D(!1)}catch(e){O("Failed to create backlog item")}else O("Backlog Item title and project are required")},children:"Add Item"})]})]})]})}},40293:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(50214);const a={getAll:()=>r.A.get("/BacklogItems"),create:e=>r.A.post("/BacklogItems",e),deleteBacklogItems:e=>r.A.delete("/BacklogItems/".concat(e)),getBacklogItems:e=>r.A.get("/BacklogItems/id/".concat(e)),update:(e,t)=>r.A.put("/BacklogItems/".concat(e),t)}},28016:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(50214);const a={getAll:()=>r.A.get("/Backlogs"),getById:e=>r.A.get("/Backlogs/id/".concat(e)),getByProject:e=>r.A.get("/Backlogs/projectId/".concat(e)),create:e=>r.A.post("/Backlogs",e),update:(e,t)=>r.A.put("/Backlogs/".concat(e),t),remove:e=>r.A.delete("/Backlogs/".concat(e))}},11046:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(50214);const a={getAll:()=>r.A.get("/projects"),get:e=>r.A.get("/projects/".concat(e)),create:e=>r.A.post("/projects",e),update:(e,t)=>r.A.put("/projects/".concat(e),t),remove:e=>r.A.delete("/projects/".concat(e)),removeAll:()=>r.A.delete("/projects"),findByTitle:e=>r.A.get("/projects?title=".concat(e)),getProjectProgress:e=>r.A.get("/projects/".concat(e,"/progress")),getBudgetAnalytics:e=>r.A.get("/projects/".concat(e,"/budget-analytics")),getTeamPerformance:e=>r.A.get("/projects/".concat(e,"/team-performance")),searchProjects:e=>r.A.post("/projects/search",e),getProjectMessages:e=>r.A.get("/projects/".concat(e,"/messages")),sendProjectMessage:(e,t)=>r.A.post("/projects/".concat(e,"/messages"),t),exportProjectReport:(e,t)=>r.A.get("/projects/".concat(e,"/export/").concat(t)),scheduleReport:(e,t)=>r.A.post("/projects/".concat(e,"/schedule-report"),t),getProjectAnalytics:e=>r.A.get("/projects/".concat(e,"/analytics")),getProjectById:e=>r.A.get("/projects/id/".concat(e))}},14194:(e,t,o)=>{o.d(t,{A:()=>L});var r=o(80045),a=o(89379),l=o(65043),n=o(58387),s=o(98610),c=o(31546),i=o(34535),d=o(56262),A=o(98206),p=o(4162),g=o(6803),u=o(52445),m=o(61596),h=o(92532),j=o(72372);function v(e){return(0,j.Ay)("MuiAlert",e)}const x=(0,h.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var f=o(17392),y=o(66734),C=o(70579);const k=(0,y.A)((0,C.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),S=(0,y.A)((0,C.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),B=(0,y.A)((0,C.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),I=(0,y.A)((0,C.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),P=(0,y.A)((0,C.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),w=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],M=(0,i.Ay)(m.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t["".concat(o.variant).concat((0,g.A)(o.color||o.severity))]]}})((0,d.A)((e=>{let{theme:t}=e;const o="light"===t.palette.mode?c.e$:c.a,r="light"===t.palette.mode?c.a:c.e$;return(0,a.A)((0,a.A)({},t.typography.body2),{},{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((0,u.A)(["light"])).map((e=>{let[a]=e;return{props:{colorSeverity:a,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(a,"Color")]:o(t.palette[a].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(a,"StandardBg")]:r(t.palette[a].light,.9),["& .".concat(x.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(a,"IconColor")]}:{color:t.palette[a].main}}}})),...Object.entries(t.palette).filter((0,u.A)(["light"])).map((e=>{let[r]=e;return{props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(r,"Color")]:o(t.palette[r].light,.6),border:"1px solid ".concat((t.vars||t).palette[r].light),["& .".concat(x.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(r,"IconColor")]}:{color:t.palette[r].main}}}})),...Object.entries(t.palette).filter((0,u.A)(["dark"])).map((e=>{let[o]=e;return{props:{colorSeverity:o,variant:"filled"},style:(0,a.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(o,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(o,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[o].dark:t.palette[o].main,color:t.palette.getContrastText(t.palette[o].main)})}}))]})}))),b=(0,i.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),W=(0,i.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),z=(0,i.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),T={success:(0,C.jsx)(k,{fontSize:"inherit"}),warning:(0,C.jsx)(S,{fontSize:"inherit"}),error:(0,C.jsx)(B,{fontSize:"inherit"}),info:(0,C.jsx)(I,{fontSize:"inherit"})},L=l.forwardRef((function(e,t){const o=(0,A.b)({props:e,name:"MuiAlert"}),{action:l,children:c,className:i,closeText:d="Close",color:u,components:m={},componentsProps:h={},icon:j,iconMapping:x=T,onClose:y,role:k="alert",severity:S="success",slotProps:B={},slots:I={},variant:L="standard"}=o,F=(0,r.A)(o,w),R=(0,a.A)((0,a.A)({},o),{},{color:u,severity:S,variant:L,colorSeverity:u||S}),N=(e=>{const{variant:t,color:o,severity:r,classes:a}=e,l={root:["root","color".concat((0,g.A)(o||r)),"".concat(t).concat((0,g.A)(o||r)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,s.A)(l,v,a)})(R),E={slots:(0,a.A)({closeButton:m.CloseButton,closeIcon:m.CloseIcon},I),slotProps:(0,a.A)((0,a.A)({},h),B)},[O,_]=(0,p.A)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,n.A)(N.root,i),elementType:M,externalForwardedProps:(0,a.A)((0,a.A)({},E),F),ownerState:R,additionalProps:{role:k,elevation:0}}),[H,V]=(0,p.A)("icon",{className:N.icon,elementType:b,externalForwardedProps:E,ownerState:R}),[D,q]=(0,p.A)("message",{className:N.message,elementType:W,externalForwardedProps:E,ownerState:R}),[Z,$]=(0,p.A)("action",{className:N.action,elementType:z,externalForwardedProps:E,ownerState:R}),[G,J]=(0,p.A)("closeButton",{elementType:f.A,externalForwardedProps:E,ownerState:R}),[K,Q]=(0,p.A)("closeIcon",{elementType:P,externalForwardedProps:E,ownerState:R});return(0,C.jsxs)(O,(0,a.A)((0,a.A)({},_),{},{children:[!1!==j?(0,C.jsx)(H,(0,a.A)((0,a.A)({},V),{},{children:j||x[S]||T[S]})):null,(0,C.jsx)(D,(0,a.A)((0,a.A)({},q),{},{children:c})),null!=l?(0,C.jsx)(Z,(0,a.A)((0,a.A)({},$),{},{children:l})):null,null==l&&y?(0,C.jsx)(Z,(0,a.A)((0,a.A)({},$),{},{children:(0,C.jsx)(G,(0,a.A)((0,a.A)({size:"small","aria-label":d,title:d,color:"inherit",onClick:y},J),{},{children:(0,C.jsx)(K,(0,a.A)({fontSize:"small"},Q))}))})):null]}))}))}}]);
//# sourceMappingURL=512.a7e9cd5a.chunk.js.map